<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yaze: ZScream vs. yaze Overworld Implementation Analysis</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../yaze.ico"/></td>
  <td id="projectalign">
   <div id="projectname">yaze<span id="projectnumber">&#160;0.3.1</span>
   </div>
   <div id="projectbrief">Link to the Past ROM Editor</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d9/d48/md_docs_2analysis_2overworld__implementation__analysis.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ZScream vs. yaze Overworld Implementation Analysis</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md126"></a> </p>
<h1><a class="anchor" id="autotoc_md127"></a>
Executive Summary</h1>
<p>After conducting a thorough line-by-line analysis of both ZScream (C#) and yaze (C++) overworld implementations, we confirm that the yaze implementation is functionally equivalent and, in some areas, more robust.</p>
<h1><a class="anchor" id="autotoc_md128"></a>
Key Findings</h1>
<h2><a class="anchor" id="autotoc_md129"></a>
‚úÖ &lt;strong&gt;Confirmed Correct Implementations&lt;/strong&gt;</h2>
<h3><a class="anchor" id="autotoc_md130"></a>
1. &lt;strong&gt;Tile32 &amp; Tile16 Expansion Detection&lt;/strong&gt;</h3>
<p>Both implementations correctly detect expanded map data. yaze's approach is more robust as it checks for both the expansion flag and the ZSCustomOverworld ASM version, while ZScream primarily checks for one or the other.</p>
<h3><a class="anchor" id="autotoc_md131"></a>
2. &lt;strong&gt;Entrance &amp; Hole Coordinate Calculation&lt;/strong&gt;</h3>
<p>The logic for calculating the x,y world coordinates for entrances and holes (including the <code>+ 0x400</code> offset for holes) is identical in both implementations, ensuring perfect compatibility.</p>
<h3><a class="anchor" id="autotoc_md132"></a>
3. &lt;strong&gt;Data Loading (Exits, Items, Sprites)&lt;/strong&gt;</h3>
<ul>
<li><b>Exits</b>: Data is loaded from the same ROM addresses with equivalent byte ordering.</li>
<li><b>Items</b>: Both correctly detect the ASM version to decide whether to load items from the original or expanded address pointers.</li>
<li><b>Sprites</b>: Both correctly handle the three separate game states (rain, pre-Agahnim, post-Agahnim) when loading sprites.</li>
</ul>
<h3><a class="anchor" id="autotoc_md133"></a>
4. &lt;strong&gt;Map Decompression &amp; Sizing&lt;/strong&gt;</h3>
<ul>
<li>Both use equivalent decompression algorithms (<code>HyruleMagicDecompress</code> in yaze vs. <code>ALTTPDecompressOverworld</code> in ZScream).</li>
<li>The logic for assigning map sizes (Small, Large, Wide) based on the ROM's size byte is identical.</li>
</ul>
<h2><a class="anchor" id="autotoc_md134"></a>
‚ö†Ô∏è &lt;strong&gt;Key Differences Found&lt;/strong&gt;</h2>
<ul>
<li><b>Entrance Expansion</b>: yaze has more robust detection for expanded entrance data, which ZScream appears to lack.</li>
<li><b>Error Handling</b>: yaze uses <code>absl::Status</code> for comprehensive error handling, whereas ZScream uses more basic checks.</li>
<li><b>Threading</b>: Both use multithreading for performance, with yaze using <code>std::async</code> and ZScream using background threads.</li>
</ul>
<h2><a class="anchor" id="autotoc_md135"></a>
üéØ &lt;strong&gt;Conclusion&lt;/strong&gt;</h2>
<p>The analysis confirms that the yaze C++ overworld implementation correctly and successfully mirrors the ZScream C# logic across all critical functionality. Our integration tests and golden data extraction system provide comprehensive validation of this functional equivalence.</p>
<p><b>Final Assessment: The yaze overworld implementation is correct, robust, and maintains full compatibility with ZScream's overworld editing capabilities, while offering some improvements in expansion detection and error handling.</b> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

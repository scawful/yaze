<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yaze: Overworld Agent Guide - AI-Powered Overworld Editing</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../yaze.ico"/></td>
  <td id="projectalign">
   <div id="projectname">yaze<span id="projectnumber">&#160;0.3.2</span>
   </div>
   <div id="projectbrief">Link to the Past ROM Editor</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('de/d00/md_docs_2F4-overworld-agent-guide.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Overworld Agent Guide - AI-Powered Overworld Editing</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md703"></a> <b>Version</b>: 1.0 <br  />
 <b>Last Updated</b>: October 6, 2025 <br  />
 <b>Audience</b>: AI Agents, z3ed users, automation developers</p>
<hr  />
<h1><a class="anchor" id="autotoc_md705"></a>
Overview</h1>
<p>This guide explains how AI agents can interact with YAZE's overworld editor through the <code>z3ed</code> CLI and automation APIs. It covers:</p><ul>
<li>Available tools and commands</li>
<li>Multimodal vision workflows</li>
<li>Proposal-based editing</li>
<li>Best practices for AI-generated edits</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md707"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md708"></a>
Prerequisites</h2>
<div class="fragment"><div class="line"># Build YAZE with AI and gRPC support</div>
<div class="line">cmake -B build -DZ3ED_AI=ON -DYAZE_WITH_GRPC=ON</div>
<div class="line">cmake --build build --target z3ed</div>
<div class="line"> </div>
<div class="line"># Set up AI provider (Gemini recommended for vision)</div>
<div class="line">export GEMINI_API_KEY=&quot;your-key-here&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md709"></a>
First Agent Interaction</h2>
<div class="fragment"><div class="line"># Ask AI about a map</div>
<div class="line">z3ed agent simple-chat &quot;What tiles are at position 10,10 on map 0?&quot; --rom zelda3.sfc</div>
<div class="line"> </div>
<div class="line"># AI agent generates edits</div>
<div class="line">z3ed agent run --prompt &quot;Place trees in a 3x3 grid at position 10,10 on map 0&quot; \</div>
<div class="line">  --rom zelda3.sfc --sandbox</div>
<div class="line"> </div>
<div class="line"># Review and accept</div>
<div class="line">z3ed agent diff --proposal-id &lt;id&gt;</div>
<div class="line">z3ed agent accept --proposal-id &lt;id&gt;</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md711"></a>
Available Tools</h1>
<h2><a class="anchor" id="autotoc_md712"></a>
Read-Only Tools (Safe for AI)</h2>
<h3><a class="anchor" id="autotoc_md713"></a>
overworld-get-tile</h3>
<p>Query tile ID at coordinates.</p>
<p><b>Purpose</b>: Analyze existing tile placement <br  />
 <b>Safety</b>: Read-only, no ROM modification <br  />
 <b>Rate Limit</b>: None</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;tool&quot;: &quot;overworld-get-tile&quot;,</div>
<div class="line">  &quot;parameters&quot;: {</div>
<div class="line">    &quot;map&quot;: 0,</div>
<div class="line">    &quot;x&quot;: 10,</div>
<div class="line">    &quot;y&quot;: 10</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Response</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;tile_id&quot;: 66,</div>
<div class="line">  &quot;tile_id_hex&quot;: &quot;0x0042&quot;,</div>
<div class="line">  &quot;position&quot;: {&quot;x&quot;: 10, &quot;y&quot;: 10}</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Use Cases</b>:</p><ul>
<li>Check what tile currently exists before painting</li>
<li>Analyze patterns in tile placement</li>
<li>Verify expected tiles after edits</li>
</ul>
<hr  />
<h3><a class="anchor" id="autotoc_md715"></a>
overworld-get-visible-region</h3>
<p>Get tiles currently visible on canvas.</p>
<p><b>Purpose</b>: Understand what the user is looking at <br  />
 <b>Safety</b>: Read-only <br  />
 <b>Rate Limit</b>: None</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;tool&quot;: &quot;overworld-get-visible-region&quot;,</div>
<div class="line">  &quot;parameters&quot;: {</div>
<div class="line">    &quot;map&quot;: 0</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Response</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;region&quot;: {</div>
<div class="line">    &quot;x_start&quot;: 0,</div>
<div class="line">    &quot;y_start&quot;: 0,</div>
<div class="line">    &quot;x_end&quot;: 31,</div>
<div class="line">    &quot;y_end&quot;: 31</div>
<div class="line">  },</div>
<div class="line">  &quot;tiles&quot;: [</div>
<div class="line">    {&quot;x&quot;: 0, &quot;y&quot;: 0, &quot;tile_id&quot;: 40},</div>
<div class="line">    {&quot;x&quot;: 1, &quot;y&quot;: 0, &quot;tile_id&quot;: 40},</div>
<div class="line">    ...</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Use Cases</b>:</p><ul>
<li>Analyze visible area before suggesting edits</li>
<li>Generate context-aware suggestions</li>
<li>Understand user's current focus</li>
</ul>
<hr  />
<h3><a class="anchor" id="autotoc_md717"></a>
overworld-analyze-region</h3>
<p>Get tile composition and patterns in a region.</p>
<p><b>Purpose</b>: Deep analysis of tile distribution <br  />
 <b>Safety</b>: Read-only <br  />
 <b>Rate Limit</b>: Large regions (&gt;1000 tiles) may be slow</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;tool&quot;: &quot;overworld-analyze-region&quot;,</div>
<div class="line">  &quot;parameters&quot;: {</div>
<div class="line">    &quot;map&quot;: 0,</div>
<div class="line">    &quot;x1&quot;: 0,</div>
<div class="line">    &quot;y1&quot;: 0,</div>
<div class="line">    &quot;x2&quot;: 31,</div>
<div class="line">    &quot;y2&quot;: 31</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Response</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;tile_counts&quot;: {</div>
<div class="line">    &quot;40&quot;: 512,   // Grass</div>
<div class="line">    &quot;66&quot;: 128,   // Tree</div>
<div class="line">    &quot;80&quot;: 64     // Water</div>
<div class="line">  },</div>
<div class="line">  &quot;patterns&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;type&quot;: &quot;forest&quot;,</div>
<div class="line">      &quot;center&quot;: {&quot;x&quot;: 15, &quot;y&quot;: 15},</div>
<div class="line">      &quot;size&quot;: {&quot;width&quot;: 10, &quot;height&quot;: 10}</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line">  &quot;statistics&quot;: {</div>
<div class="line">    &quot;total_tiles&quot;: 1024,</div>
<div class="line">    &quot;unique_tiles&quot;: 15,</div>
<div class="line">    &quot;most_common_tile&quot;: 40</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Use Cases</b>:</p><ul>
<li>Understand map composition before edits</li>
<li>Detect patterns (forests, water bodies, paths)</li>
<li>Generate statistics for reports</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md719"></a>
Write Tools (Sandboxed - Creates Proposals)</h2>
<h3><a class="anchor" id="autotoc_md720"></a>
overworld-set-tile</h3>
<p>Paint a single tile (creates proposal).</p>
<p><b>Purpose</b>: Modify single tile <br  />
 <b>Safety</b>: Sandboxed, creates proposal <br  />
 <b>Rate Limit</b>: Reasonable (don't spam)</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;tool&quot;: &quot;overworld-set-tile&quot;,</div>
<div class="line">  &quot;parameters&quot;: {</div>
<div class="line">    &quot;map&quot;: 0,</div>
<div class="line">    &quot;x&quot;: 10,</div>
<div class="line">    &quot;y&quot;: 10,</div>
<div class="line">    &quot;tile_id&quot;: 66</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Response</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;proposal_id&quot;: &quot;abc123&quot;,</div>
<div class="line">  &quot;success&quot;: true,</div>
<div class="line">  &quot;message&quot;: &quot;Proposal created: Set tile at (10,10) to 0x0042&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Use Cases</b>:</p><ul>
<li>Fix individual tiles</li>
<li>Place objects at specific coordinates</li>
<li>Correct tile placement errors</li>
</ul>
<hr  />
<h3><a class="anchor" id="autotoc_md722"></a>
overworld-set-tiles-batch</h3>
<p>Paint multiple tiles in one operation (creates proposal).</p>
<p><b>Purpose</b>: Efficient multi-tile editing <br  />
 <b>Safety</b>: Sandboxed, creates proposal <br  />
 <b>Rate Limit</b>: Max 1000 tiles per batch</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;tool&quot;: &quot;overworld-set-tiles-batch&quot;,</div>
<div class="line">  &quot;parameters&quot;: {</div>
<div class="line">    &quot;map&quot;: 0,</div>
<div class="line">    &quot;tiles&quot;: [</div>
<div class="line">      {&quot;x&quot;: 10, &quot;y&quot;: 10, &quot;tile_id&quot;: 66},</div>
<div class="line">      {&quot;x&quot;: 11, &quot;y&quot;: 10, &quot;tile_id&quot;: 66},</div>
<div class="line">      {&quot;x&quot;: 12, &quot;y&quot;: 10, &quot;tile_id&quot;: 66}</div>
<div class="line">    ]</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Response</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;proposal_id&quot;: &quot;abc123&quot;,</div>
<div class="line">  &quot;tiles_painted&quot;: 3,</div>
<div class="line">  &quot;success&quot;: true</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Use Cases</b>:</p><ul>
<li>Create patterns (forests, paths, water bodies)</li>
<li>Fill regions with specific tiles</li>
<li>Generate complex map structures</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md724"></a>
Multimodal Vision Workflow</h1>
<h2><a class="anchor" id="autotoc_md725"></a>
Step 1: Capture Canvas Screenshot</h2>
<div class="fragment"><div class="line"># From CLI</div>
<div class="line">z3ed agent vision --capture-canvas &quot;Overworld Canvas&quot; \</div>
<div class="line">  --prompt &quot;Analyze this overworld map&quot; \</div>
<div class="line">  --rom zelda3.sfc</div>
<div class="line"> </div>
<div class="line"># From agent workflow</div>
<div class="line">z3ed agent run --prompt &quot;Analyze map 0 and suggest improvements&quot; \</div>
<div class="line">  --rom zelda3.sfc --sandbox</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md726"></a>
Step 2: AI Analyzes Screenshot</h2>
<p>Gemini Vision API receives:</p><ul>
<li>Screenshot of canvas (PNG/JPEG)</li>
<li>User prompt</li>
<li>Context (map index, visible region)</li>
</ul>
<p>AI returns: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;analysis&quot;: {</div>
<div class="line">    &quot;observations&quot;: [</div>
<div class="line">      &quot;Grass tiles dominate the visible area&quot;,</div>
<div class="line">      &quot;Tree tiles are sparse and unnatural&quot;,</div>
<div class="line">      &quot;Water tiles at (15,15) have incorrect palette colors&quot;,</div>
<div class="line">      &quot;Path from (5,5) to (25,5) is broken&quot;</div>
<div class="line">    ],</div>
<div class="line">    &quot;composition_score&quot;: 6.5,</div>
<div class="line">    &quot;issues&quot;: [</div>
<div class="line">      {</div>
<div class="line">        &quot;type&quot;: &quot;sparse_trees&quot;,</div>
<div class="line">        &quot;severity&quot;: &quot;medium&quot;,</div>
<div class="line">        &quot;location&quot;: {&quot;x&quot;: 10, &quot;y&quot;: 10},</div>
<div class="line">        &quot;suggestion&quot;: &quot;Add more tree tiles for forest theme&quot;</div>
<div class="line">      }</div>
<div class="line">    ]</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md727"></a>
Step 3: Generate Edit Plan</h2>
<p>AI creates actionable plan: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;plan&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;tool&quot;: &quot;overworld-set-tiles-batch&quot;,</div>
<div class="line">      &quot;parameters&quot;: {</div>
<div class="line">        &quot;map&quot;: 0,</div>
<div class="line">        &quot;tiles&quot;: [</div>
<div class="line">          {&quot;x&quot;: 10, &quot;y&quot;: 10, &quot;tile_id&quot;: 66},</div>
<div class="line">          {&quot;x&quot;: 11, &quot;y&quot;: 10, &quot;tile_id&quot;: 66},</div>
<div class="line">          {&quot;x&quot;: 12, &quot;y&quot;: 10, &quot;tile_id&quot;: 66}</div>
<div class="line">        ]</div>
<div class="line">      },</div>
<div class="line">      &quot;reason&quot;: &quot;Create denser forest area&quot;</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md728"></a>
Step 4: Execute Plan (Sandbox)</h2>
<div class="fragment"><div class="line"># z3ed executes plan in sandbox</div>
<div class="line">z3ed agent run --plan plan.json --rom zelda3.sfc --sandbox</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md729"></a>
Step 5: Human Review</h2>
<div class="fragment"><div class="line"># View proposed changes</div>
<div class="line">z3ed agent diff --proposal-id abc123</div>
<div class="line"> </div>
<div class="line"># Accept or reject</div>
<div class="line">z3ed agent accept --proposal-id abc123</div>
<div class="line"># or</div>
<div class="line">z3ed agent reject --proposal-id abc123</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md731"></a>
Example Workflows</h1>
<h2><a class="anchor" id="autotoc_md732"></a>
Workflow 1: Create Forest Area</h2>
<p><b>User Prompt</b>: "Create a forest clearing at position 15,15 with grass in the center"</p>
<p><b>AI Plan</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;steps&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 1,</div>
<div class="line">      &quot;description&quot;: &quot;Check current tiles in region&quot;,</div>
<div class="line">      &quot;tool&quot;: &quot;overworld-analyze-region&quot;,</div>
<div class="line">      &quot;parameters&quot;: {</div>
<div class="line">        &quot;map&quot;: 0,</div>
<div class="line">        &quot;x1&quot;: 10,</div>
<div class="line">        &quot;y1&quot;: 10,</div>
<div class="line">        &quot;x2&quot;: 20,</div>
<div class="line">        &quot;y2&quot;: 20</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 2,</div>
<div class="line">      &quot;description&quot;: &quot;Paint grass clearing (center 5x5)&quot;,</div>
<div class="line">      &quot;tool&quot;: &quot;overworld-set-tiles-batch&quot;,</div>
<div class="line">      &quot;parameters&quot;: {</div>
<div class="line">        &quot;map&quot;: 0,</div>
<div class="line">        &quot;tiles&quot;: [</div>
<div class="line">          {&quot;x&quot;: 13, &quot;y&quot;: 13, &quot;tile_id&quot;: 40},</div>
<div class="line">          {&quot;x&quot;: 14, &quot;y&quot;: 13, &quot;tile_id&quot;: 40},</div>
<div class="line">          ...</div>
<div class="line">        ]</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 3,</div>
<div class="line">      &quot;description&quot;: &quot;Plant trees around edges&quot;,</div>
<div class="line">      &quot;tool&quot;: &quot;overworld-set-tiles-batch&quot;,</div>
<div class="line">      &quot;parameters&quot;: {</div>
<div class="line">        &quot;map&quot;: 0,</div>
<div class="line">        &quot;tiles&quot;: [</div>
<div class="line">          {&quot;x&quot;: 10, &quot;y&quot;: 10, &quot;tile_id&quot;: 66},</div>
<div class="line">          {&quot;x&quot;: 11, &quot;y&quot;: 10, &quot;tile_id&quot;: 66},</div>
<div class="line">          ...</div>
<div class="line">        ]</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>CLI Execution</b>: </p><div class="fragment"><div class="line">z3ed agent run --prompt &quot;Create a forest clearing at position 15,15 with grass in the center&quot; \</div>
<div class="line">  --rom zelda3.sfc --sandbox</div>
</div><!-- fragment --><p><b>Result</b>: Proposal created with 50+ tile changes</p>
<hr  />
<h2><a class="anchor" id="autotoc_md734"></a>
Workflow 2: Fix Tile Placement Errors</h2>
<p><b>User Prompt</b>: "Fix any water tiles that should be grass in the visible region"</p>
<p><b>AI Plan</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;steps&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 1,</div>
<div class="line">      &quot;tool&quot;: &quot;overworld-get-visible-region&quot;,</div>
<div class="line">      &quot;parameters&quot;: {&quot;map&quot;: 0}</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 2,</div>
<div class="line">      &quot;tool&quot;: &quot;overworld-analyze-region&quot;,</div>
<div class="line">      &quot;parameters&quot;: {</div>
<div class="line">        &quot;map&quot;: 0,</div>
<div class="line">        &quot;x1&quot;: 0,</div>
<div class="line">        &quot;y1&quot;: 0,</div>
<div class="line">        &quot;x2&quot;: 31,</div>
<div class="line">        &quot;y2&quot;: 31</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 3,</div>
<div class="line">      &quot;description&quot;: &quot;Identify misplaced water tiles&quot;,</div>
<div class="line">      &quot;logic&quot;: &quot;Find water tiles (80) surrounded by grass (40)&quot;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 4,</div>
<div class="line">      &quot;tool&quot;: &quot;overworld-set-tiles-batch&quot;,</div>
<div class="line">      &quot;parameters&quot;: {</div>
<div class="line">        &quot;map&quot;: 0,</div>
<div class="line">        &quot;tiles&quot;: [</div>
<div class="line">          {&quot;x&quot;: 5, &quot;y&quot;: 5, &quot;tile_id&quot;: 40},</div>
<div class="line">          {&quot;x&quot;: 12, &quot;y&quot;: 8, &quot;tile_id&quot;: 40}</div>
<div class="line">        ]</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md736"></a>
Workflow 3: Generate Path</h2>
<p><b>User Prompt</b>: "Create a path from (5,5) to (25,25) using path tiles"</p>
<p><b>AI Plan</b>: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;steps&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 1,</div>
<div class="line">      &quot;description&quot;: &quot;Calculate path coordinates&quot;,</div>
<div class="line">      &quot;logic&quot;: &quot;Line from (5,5) to (25,25)&quot;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;step&quot;: 2,</div>
<div class="line">      &quot;tool&quot;: &quot;overworld-set-tiles-batch&quot;,</div>
<div class="line">      &quot;parameters&quot;: {</div>
<div class="line">        &quot;map&quot;: 0,</div>
<div class="line">        &quot;tiles&quot;: [</div>
<div class="line">          {&quot;x&quot;: 5, &quot;y&quot;: 5, &quot;tile_id&quot;: 50},</div>
<div class="line">          {&quot;x&quot;: 6, &quot;y&quot;: 6, &quot;tile_id&quot;: 50},</div>
<div class="line">          {&quot;x&quot;: 7, &quot;y&quot;: 7, &quot;tile_id&quot;: 50},</div>
<div class="line">          ...</div>
<div class="line">        ]</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md738"></a>
Common Tile IDs Reference</h1>
<h2><a class="anchor" id="autotoc_md739"></a>
Grass &amp; Ground</h2>
<ul>
<li><code>0x0028</code> (40) - Grass</li>
<li><code>0x0029</code> (41) - Dark grass</li>
<li><code>0x002A</code> (42) - Dirt</li>
<li><code>0x002B</code> (43) - Sand</li>
</ul>
<h2><a class="anchor" id="autotoc_md740"></a>
Trees &amp; Plants</h2>
<ul>
<li><code>0x0042</code> (66) - Tree</li>
<li><code>0x0043</code> (67) - Bush</li>
<li><code>0x0044</code> (68) - Flower</li>
</ul>
<h2><a class="anchor" id="autotoc_md741"></a>
Water</h2>
<ul>
<li><code>0x0050</code> (80) - Water</li>
<li><code>0x0051</code> (81) - Deep water</li>
<li><code>0x0052</code> (82) - Shore</li>
</ul>
<h2><a class="anchor" id="autotoc_md742"></a>
Paths &amp; Roads</h2>
<ul>
<li><code>0x0032</code> (50) - Path</li>
<li><code>0x0033</code> (51) - Road</li>
<li><code>0x0034</code> (52) - Bridge</li>
</ul>
<h2><a class="anchor" id="autotoc_md743"></a>
Structures</h2>
<ul>
<li><code>0x0060</code> (96) - Wall</li>
<li><code>0x0061</code> (97) - Door</li>
<li><code>0x0062</code> (98) - Window</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md745"></a>
Best Practices for AI Agents</h1>
<h2><a class="anchor" id="autotoc_md746"></a>
1. Always Analyze Before Editing</h2>
<div class="fragment"><div class="line"># GOOD: Check current state first</div>
<div class="line">z3ed agent run --prompt &quot;Analyze map 0 then suggest improvements&quot; --rom zelda3.sfc --sandbox</div>
<div class="line"> </div>
<div class="line"># BAD: Blindly paint without context</div>
<div class="line">z3ed agent run --prompt &quot;Paint trees everywhere&quot; --rom zelda3.sfc --sandbox</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md747"></a>
2. Use Batch Operations</h2>
<div class="fragment"><div class="line"># GOOD: Single batch operation</div>
<div class="line">overworld-set-tiles-batch (50 tiles)</div>
<div class="line"> </div>
<div class="line"># BAD: 50 individual operations</div>
<div class="line">overworld-set-tile (×50)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md748"></a>
3. Provide Clear Reasoning</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;tool&quot;: &quot;overworld-set-tile&quot;,</div>
<div class="line">  &quot;parameters&quot;: {&quot;x&quot;: 10, &quot;y&quot;: 10, &quot;tile_id&quot;: 66},</div>
<div class="line">  &quot;reason&quot;: &quot;Creating forest theme - tree tile at center&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md749"></a>
4. Respect Tile Boundaries</h2>
<p>Large maps (0x00-0x09, 0x80-0x89) are 512×512 pixels = 32×32 tiles. <br  />
 Don't paint beyond <code>(31, 31)</code> for these maps.</p>
<h2><a class="anchor" id="autotoc_md750"></a>
5. Check Visibility</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;step&quot;: 1,</div>
<div class="line">  &quot;tool&quot;: &quot;overworld-get-visible-region&quot;,</div>
<div class="line">  &quot;reason&quot;: &quot;Ensure tiles are visible before analysis&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md751"></a>
6. Create Reversible Edits</h2>
<p>Always generate proposals that can be rejected: </p><div class="fragment"><div class="line">z3ed agent run --prompt &quot;...&quot; --rom zelda3.sfc --sandbox  # Creates proposal</div>
<div class="line">z3ed agent reject --proposal-id abc123                     # Can undo</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md753"></a>
Error Handling</h1>
<h2><a class="anchor" id="autotoc_md754"></a>
"Tile ID out of range"</h2>
<ul>
<li><b>Cause</b>: Invalid tile ID (&gt;4095 for Tile16)</li>
<li><b>Fix</b>: Validate tile IDs before <code>set-tile</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md755"></a>
"Coordinates out of bounds"</h2>
<ul>
<li><b>Cause</b>: Painting beyond map boundaries</li>
<li><b>Fix</b>: Check map dimensions (typically 32×32 tiles)</li>
</ul>
<h2><a class="anchor" id="autotoc_md756"></a>
"Proposal rejected"</h2>
<ul>
<li><b>Cause</b>: Human reviewer rejected changes</li>
<li><b>Fix</b>: Analyze feedback, adjust plan, try again</li>
</ul>
<h2><a class="anchor" id="autotoc_md757"></a>
"ROM file locked"</h2>
<ul>
<li><b>Cause</b>: ROM file open in another process</li>
<li><b>Fix</b>: Close other instances of YAZE</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md759"></a>
Testing AI-Generated Edits</h1>
<h2><a class="anchor" id="autotoc_md760"></a>
Manual Testing</h2>
<div class="fragment"><div class="line"># Generate proposal</div>
<div class="line">z3ed agent run --prompt &quot;...&quot; --rom zelda3.sfc --sandbox</div>
<div class="line"> </div>
<div class="line"># Review in YAZE GUI</div>
<div class="line">yaze zelda3.sfc</div>
<div class="line"># Open Debug → Agent Chat → Proposals</div>
<div class="line"># Review proposal, accept/reject</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md761"></a>
Automated Testing</h2>
<div class="fragment"><div class="line"># GUI automation test</div>
<div class="line">z3ed agent test replay overworld_ai_edit.jsonl --rom zelda3.sfc --grpc localhost:50051</div>
<div class="line"> </div>
<div class="line"># Validate tile placement</div>
<div class="line">z3ed agent test assert --tile-at 10,10 --expected-tile 66 --rom zelda3.sfc</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md763"></a>
Advanced Techniques</h1>
<h2><a class="anchor" id="autotoc_md764"></a>
Technique 1: Pattern Recognition</h2>
<p>Use multimodal vision to detect patterns: </p><div class="fragment"><div class="line">z3ed agent vision --capture-canvas &quot;Overworld Canvas&quot; \</div>
<div class="line">  --prompt &quot;Identify repeated tile patterns in this map&quot; \</div>
<div class="line">  --rom zelda3.sfc</div>
</div><!-- fragment --><p>AI detects:</p><ul>
<li>Forest clusters</li>
<li>Water bodies</li>
<li>Paths and roads</li>
<li>Building layouts</li>
</ul>
<h2><a class="anchor" id="autotoc_md765"></a>
Technique 2: Style Transfer</h2>
<div class="fragment"><div class="line">z3ed agent run --prompt &quot;Make this map look like Kakariko Village from the dark world&quot; \</div>
<div class="line">  --rom zelda3.sfc --sandbox</div>
</div><!-- fragment --><p>AI:</p><ol type="1">
<li>Analyzes Kakariko Village (map 0x18)</li>
<li>Extracts tile palette and patterns</li>
<li>Applies similar patterns to target map</li>
</ol>
<h2><a class="anchor" id="autotoc_md766"></a>
Technique 3: Procedural Generation</h2>
<div class="fragment"><div class="line">z3ed agent run --prompt &quot;Generate a random forest area at 10,10 with natural-looking tree placement&quot; \</div>
<div class="line">  --rom zelda3.sfc --sandbox</div>
</div><!-- fragment --><p>AI uses procedural algorithms:</p><ul>
<li>Perlin noise for natural randomness</li>
<li>Clustering for realistic tree placement</li>
<li>Edge smoothing for organic boundaries</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md768"></a>
Integration with GUI Automation</h1>
<h2><a class="anchor" id="autotoc_md769"></a>
Record Human Edits</h2>
<div class="fragment"><div class="line"># Record editing session</div>
<div class="line">z3ed agent test record --suite overworld_forest.jsonl --rom zelda3.sfc</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md770"></a>
Replay for AI Training</h2>
<div class="fragment"><div class="line"># Replay recorded session</div>
<div class="line">z3ed agent test replay overworld_forest.jsonl --rom zelda3.sfc</div>
<div class="line"> </div>
<div class="line"># AI learns from human edits</div>
<div class="line">z3ed agent learn --from-recording overworld_forest.jsonl</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md771"></a>
Validate AI Edits</h2>
<div class="fragment"><div class="line"># AI generates edits</div>
<div class="line">z3ed agent run --prompt &quot;...&quot; --rom zelda3.sfc --sandbox</div>
<div class="line"> </div>
<div class="line"># GUI automation validates</div>
<div class="line">z3ed agent test verify --proposal-id abc123 --suite validation_tests.jsonl</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md773"></a>
Collaboration Features</h1>
<h2><a class="anchor" id="autotoc_md774"></a>
Network Collaboration</h2>
<div class="fragment"><div class="line"># Connect to yaze-server</div>
<div class="line">z3ed net connect ws://localhost:8765</div>
<div class="line"> </div>
<div class="line"># Join session</div>
<div class="line">z3ed net join ABC123 --username &quot;ai-agent&quot;</div>
<div class="line"> </div>
<div class="line"># AI agent edits, humans review in real-time</div>
<div class="line">z3ed agent run --prompt &quot;...&quot; --rom zelda3.sfc --sandbox</div>
<div class="line"> </div>
<div class="line"># Proposal synced to all participants</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md775"></a>
Proposal Voting</h2>
<div class="fragment"><div class="line"># Submit proposal to session</div>
<div class="line">z3ed proposal submit --proposal-id abc123 --session ABC123</div>
<div class="line"> </div>
<div class="line"># Wait for votes</div>
<div class="line">z3ed proposal wait --proposal-id abc123</div>
<div class="line"> </div>
<div class="line"># Check result</div>
<div class="line">z3ed proposal status --proposal-id abc123</div>
<div class="line"># Output: approved (3/3 votes)</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md777"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md778"></a>
Agent Not Responding</h2>
<div class="fragment"><div class="line"># Check AI provider</div>
<div class="line">z3ed agent ping</div>
<div class="line"> </div>
<div class="line"># Test simple query</div>
<div class="line">z3ed agent simple-chat &quot;Hello&quot; --rom zelda3.sfc</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md779"></a>
Tools Not Available</h2>
<div class="fragment"><div class="line"># Verify z3ed build</div>
<div class="line">z3ed agent describe --resource overworld</div>
<div class="line"> </div>
<div class="line"># Should show:</div>
<div class="line"># - overworld-get-tile</div>
<div class="line"># - overworld-set-tile</div>
<div class="line"># - overworld-analyze-region</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md780"></a>
gRPC Connection Failed</h2>
<div class="fragment"><div class="line"># Check YAZE is running with gRPC</div>
<div class="line">z3ed agent test ping --grpc localhost:50051</div>
<div class="line"> </div>
<div class="line"># Start YAZE with gRPC enabled</div>
<div class="line">yaze --enable-grpc zelda3.sfc</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md782"></a>
See Also</h1>
<ul>
<li>Canvas Automation API - C++ API reference</li>
<li>GUI Automation Scenarios - Test examples</li>
<li><a class="el" href="../../d0/d30/md_README.html">z3ed README</a> - CLI documentation</li>
<li><a href="../../README.md#multimodal-vision-gemini">Multimodal Vision</a> - Screenshot analysis </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

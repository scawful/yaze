<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yaze: A Link to the Past ROM Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../yaze.ico"/></td>
  <td id="projectalign">
   <div id="projectname">yaze<span id="projectnumber">&#160;0.3.2</span>
   </div>
   <div id="projectbrief">Link to the Past ROM Editor</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d7/d4f/md_docs_2R1-alttp-rom-reference.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">A Link to the Past ROM Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1005"></a> </p>
<h1><a class="anchor" id="autotoc_md1006"></a>
Graphics System</h1>
<h2><a class="anchor" id="autotoc_md1007"></a>
Graphics Sheets</h2>
<p>The ROM contains 223 graphics sheets, each 128x32 pixels (16 tiles × 4 tiles, 8×8 tile size):</p>
<p><b>Sheet Categories</b>:</p><ul>
<li>Sheets 0-112: Overworld/Dungeon graphics (compressed 3BPP)</li>
<li>Sheets 113-114: Uncompressed 2BPP graphics</li>
<li>Sheets 115-126: Uncompressed 3BPP graphics <br  />
</li>
<li>Sheets 127-217: Additional dungeon/sprite graphics</li>
<li>Sheets 218-222: Menu/HUD graphics (2BPP)</li>
</ul>
<p><b>Graphics Format</b>:</p><ul>
<li>3BPP (3 bits per pixel): 8 colors per tile, commonly used for backgrounds</li>
<li>2BPP (2 bits per pixel): 4 colors per tile, used for fonts and simple graphics</li>
</ul>
<h2><a class="anchor" id="autotoc_md1008"></a>
Palette System</h2>
<h3><a class="anchor" id="autotoc_md1009"></a>
Color Format</h3>
<p>SNES uses 15-bit BGR555 color format:</p><ul>
<li>2 bytes per color</li>
<li>Format: <code>0BBB BBGG GGGR RRRR</code></li>
<li>Each channel: 0-31 (5 bits)</li>
<li>Total possible colors: 32,768</li>
</ul>
<h3><a class="anchor" id="autotoc_md1010"></a>
Palette Groups</h3>
<p><b>Dungeon Palettes</b> (0xDD734):</p><ul>
<li>20 palettes × 90 colors each</li>
<li>Distributed as: BG1 colors, BG2 colors, sprite colors</li>
<li>Applied per-room via palette ID</li>
</ul>
<p><b>Overworld Palettes</b>:</p><ul>
<li>Main: 35 colors per palette (0xDE6C8)</li>
<li>Auxiliary: 21 colors per palette (0xDE86C)</li>
<li>Animated: 7 colors per palette (0xDE604)</li>
</ul>
<p><b>Sprite Palettes</b>:</p><ul>
<li>Global sprites: 60 colors (0xDD308)</li>
<li>Auxiliary 1: 7 colors per palette (0xDD39E)</li>
<li>Auxiliary 2: 7 colors per palette (0xDD446) <br  />
</li>
<li>Auxiliary 3: 7 colors per palette (0xDD4E0)</li>
</ul>
<p><b>Other Palettes</b>:</p><ul>
<li>HUD: 32 colors per palette (0xDD218)</li>
<li>Armors: 15 colors per palette (0xDD630)</li>
<li>Swords: 3 colors per palette <br  />
</li>
<li>Shields: 4 colors per palette</li>
</ul>
<h1><a class="anchor" id="autotoc_md1011"></a>
Dungeon System</h1>
<h2><a class="anchor" id="autotoc_md1012"></a>
Room Data Structure</h2>
<p><b>Room Objects</b> (3 bytes each): </p><div class="fragment"><div class="line">Byte 1: YYYXXXXX</div>
<div class="line">  YYY = Y coordinate (0-31)</div>
<div class="line">  XXXXX = X coordinate (0-31) + layer flag (bit 5)</div>
<div class="line"> </div>
<div class="line">Byte 2: SSSSSSSS  </div>
<div class="line">  Size byte (interpretation varies by object type)</div>
<div class="line"> </div>
<div class="line">Byte 3: IIIIIIII</div>
<div class="line">  Object ID or ID component (0-255)</div>
</div><!-- fragment --><p><b>Object Patterns</b>:</p><ul>
<li>0x34: 1x1 solid block</li>
<li>0x00-0x08: Rightward 2x2 expansion</li>
<li>0x60-0x68: Downward 2x2 expansion</li>
<li>0x09-0x14: Diagonal acute (/)</li>
<li>0x15-0x20: Diagonal grave ()</li>
<li>0x33, 0x70-0x71: 4x4 blocks</li>
</ul>
<h2><a class="anchor" id="autotoc_md1013"></a>
Tile16 Format</h2>
<p>Each Tile16 is composed of four 8x8 tiles: </p><div class="fragment"><div class="line">[Top-Left] [Top-Right]</div>
<div class="line">[Bot-Left] [Bot-Right]</div>
</div><!-- fragment --><p>Stored as 8 bytes (2 bytes per 8x8 tile): </p><div class="fragment"><div class="line"><span class="comment">// 16-bit tile info: vhopppcccccccccc</span></div>
<div class="line"><span class="comment">// v = vertical flip</span></div>
<div class="line"><span class="comment">// h = horizontal flip  </span></div>
<div class="line"><span class="comment">// o = priority</span></div>
<div class="line"><span class="comment">// ppp = palette index (0-7)</span></div>
<div class="line"><span class="comment">// cccccccccc = tile ID (0-1023)</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1014"></a>
Blocksets</h2>
<p>Each dungeon room uses a blockset defining which graphics sheets are loaded:</p><ul>
<li>16 sheets per blockset</li>
<li>First 8: Background graphics</li>
<li>Last 8: Sprite graphics</li>
</ul>
<p><b>Blockset Pointer</b>: 0x0FFC40</p>
<h1><a class="anchor" id="autotoc_md1015"></a>
Message System</h1>
<h2><a class="anchor" id="autotoc_md1016"></a>
Text Data Locations</h2>
<ul>
<li>Text Block 1: 0xE0000 - 0xE7FFF (32KB)</li>
<li>Text Block 2: 0x75F40 - 0x773FF (5.3KB)</li>
<li>Dictionary Pointers: 0x74703</li>
</ul>
<h2><a class="anchor" id="autotoc_md1017"></a>
Character Encoding</h2>
<ul>
<li>0x00-0x66: Standard characters (A-Z, a-z, 0-9, punctuation)</li>
<li>0x67-0x80: Text commands (line breaks, colors, window controls)</li>
<li>0x88-0xE8: Dictionary references (compressed common words)</li>
<li>0x7F: Message terminator</li>
</ul>
<h2><a class="anchor" id="autotoc_md1018"></a>
Text Commands</h2>
<ul>
<li>0x6A: Player name insertion</li>
<li>0x6B: Window border (+ 1 argument byte)</li>
<li>0x73: Scroll text vertically</li>
<li>0x74-0x76: Line 1, 2, 3 markers</li>
<li>0x77: Text color (+ 1 argument byte)</li>
<li>0x7E: Wait for key press</li>
</ul>
<h2><a class="anchor" id="autotoc_md1019"></a>
Font Graphics</h2>
<ul>
<li>Location: 0x70000</li>
<li>Format: 2BPP</li>
<li>Size: 8KB (0x2000 bytes)</li>
<li>Organized as 8x8 tiles for characters</li>
</ul>
<h1><a class="anchor" id="autotoc_md1020"></a>
Overworld System</h1>
<h2><a class="anchor" id="autotoc_md1021"></a>
Map Structure</h2>
<ul>
<li>3 worlds: Light, Dark, Special</li>
<li>Each world: 8×8 grid of 512×512 pixel maps</li>
<li>Total maps: 192 (64 per world)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1022"></a>
Area Sizes (ZSCustomOverworld v3+)</h2>
<ul>
<li>Small: 512×512 (1 map)</li>
<li>Wide: 1024×512 (2 maps horizontal)</li>
<li>Tall: 512×1024 (2 maps vertical)</li>
<li>Large: 1024×1024 (4 maps in 2×2 grid)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1023"></a>
Tile Format</h2>
<ul>
<li>Map uses Tile16 (16×16 pixel tiles)</li>
<li>Each Tile16 composed of four 8x8 tiles</li>
<li>32×32 Tile16s per 512×512 map</li>
</ul>
<h1><a class="anchor" id="autotoc_md1024"></a>
Compression</h1>
<h2><a class="anchor" id="autotoc_md1025"></a>
LC-LZ2 Algorithm</h2>
<p>Both graphics and map data use a variant of LZ compression:</p>
<p><b>Commands</b>:</p><ul>
<li>0x00-0x1F: Direct copy (copy N bytes verbatim)</li>
<li>0x20-0x3F: Byte fill (repeat 1 byte N times)</li>
<li>0x40-0x5F: Word fill (repeat 2 bytes N times)</li>
<li>0x60-0x7F: Incremental fill (0x05, 0x06, 0x07...)</li>
<li>0x80-0xFF: LZ copy (copy from earlier in buffer)</li>
</ul>
<p><b>Extended Headers</b> (for lengths &gt; 31):</p><ul>
<li>0xE0-0xFF: Extended command headers</li>
<li>Allows compression of up to 1024 bytes</li>
</ul>
<p><b>Modes</b>:</p><ul>
<li>Mode 1 (Nintendo): Graphics decompression (byte order variation)</li>
<li>Mode 2 (Nintendo): Overworld decompression (byte order variation)</li>
</ul>
<h1><a class="anchor" id="autotoc_md1026"></a>
Memory Map</h1>
<h2><a class="anchor" id="autotoc_md1027"></a>
ROM Banks (LoROM)</h2>
<ul>
<li>Bank 0x00-0x7F: ROM data</li>
<li>Bank 0x80-0xFF: Mirror of 0x00-0x7F</li>
</ul>
<h2><a class="anchor" id="autotoc_md1028"></a>
Important ROM Locations</h2>
<div class="fragment"><div class="line">Graphics:</div>
<div class="line">  0x080000+  Link graphics (uncompressed)</div>
<div class="line">  0x0F8000+  Dungeon object subtype tables</div>
<div class="line">  0x0FB373   Object subtype 1 table</div>
<div class="line">  0x0FFC40   Blockset pointers</div>
<div class="line"> </div>
<div class="line">Palettes:</div>
<div class="line">  0x0DD218   HUD palettes</div>
<div class="line">  0x0DD308   Global sprite palettes</div>
<div class="line">  0x0DD734   Dungeon main palettes  </div>
<div class="line">  0x0DE6C8   Overworld main palettes</div>
<div class="line">  0x0DE604   Animated palettes</div>
<div class="line"> </div>
<div class="line">Text:</div>
<div class="line">  0x070000   Font graphics</div>
<div class="line">  0x0E0000   Main text data</div>
<div class="line">  0x075F40   Extended text data</div>
<div class="line"> </div>
<div class="line">Tile Data:</div>
<div class="line">  0x0F8000   Tile16 data (4032 tiles)</div>
</div><!-- fragment --><hr  />
<p><b>Last Updated</b>: October 9, 2025 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

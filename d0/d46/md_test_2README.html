<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yaze: yaze Test Suite</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../yaze.ico"/></td>
  <td id="projectalign">
   <div id="projectname">yaze<span id="projectnumber">&#160;0.3.2</span>
   </div>
   <div id="projectbrief">Link to the Past ROM Editor</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d0/d46/md_test_2README.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">yaze Test Suite</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md586"></a> This directory contains the comprehensive test suite for YAZE, organized for optimal AI agent testing and development workflow.</p>
<h1><a class="anchor" id="autotoc_md587"></a>
Directory Structure</h1>
<div class="fragment"><div class="line">test/</div>
<div class="line">├── unit/                    # Unit tests for individual components</div>
<div class="line">│   ├── core/               # Core functionality tests</div>
<div class="line">│   ├── rom/                # ROM handling tests</div>
<div class="line">│   ├── gfx/                # Graphics system tests</div>
<div class="line">│   └── zelda3/             # Zelda 3 specific tests</div>
<div class="line">├── integration/            # Integration tests</div>
<div class="line">│   ├── editor/             # Editor integration tests</div>
<div class="line">│   ├── asar_integration_test.cc</div>
<div class="line">│   ├── asar_rom_test.cc</div>
<div class="line">│   └── dungeon_editor_test.cc</div>
<div class="line">├── e2e/                    # End-to-end tests</div>
<div class="line">│   ├── rom_dependent/      # ROM-dependent E2E tests</div>
<div class="line">│   └── zscustomoverworld/  # ZSCustomOverworld upgrade tests</div>
<div class="line">├── deprecated/             # Outdated tests (for cleanup)</div>
<div class="line">│   └── emu/                # Deprecated emulator tests</div>
<div class="line">├── mocks/                  # Mock objects for testing</div>
<div class="line">├── assets/                 # Test assets and patches</div>
<div class="line">└── yaze_test.cc           # Enhanced test runner</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md588"></a>
Test Categories</h1>
<h2><a class="anchor" id="autotoc_md589"></a>
Unit Tests (&lt;tt&gt;unit/&lt;/tt&gt;)</h2>
<ul>
<li><b>Core</b>: ASAR wrapper, hex utilities, core functionality</li>
<li><b>ROM</b>: ROM loading, saving, validation</li>
<li><b>Graphics</b>: SNES tiles, palettes, compression</li>
<li><b>Zelda3</b>: Message system, overworld, objects, sprites</li>
</ul>
<h2><a class="anchor" id="autotoc_md590"></a>
Integration Tests (&lt;tt&gt;integration/&lt;/tt&gt;)</h2>
<ul>
<li><b>Editor</b>: Tile editor, dungeon editor integration</li>
<li><b>ASAR</b>: ASAR integration and ROM patching</li>
<li><b>Dungeon</b>: Dungeon editor system integration</li>
</ul>
<h2><a class="anchor" id="autotoc_md591"></a>
End-to-End Tests (&lt;tt&gt;e2e/&lt;/tt&gt;)</h2>
<ul>
<li><b>ROM Dependent</b>: Complete ROM editing workflow validation</li>
<li><b>ZSCustomOverworld</b>: Version upgrade testing (vanilla → v2 → v3)</li>
</ul>
<h1><a class="anchor" id="autotoc_md592"></a>
Enhanced Test Runner</h1>
<p>The <code>yaze_test</code> executable now supports comprehensive argument handling for AI agents:</p>
<h2><a class="anchor" id="autotoc_md593"></a>
Usage Examples</h2>
<div class="fragment"><div class="line"># Run all tests</div>
<div class="line">./yaze_test</div>
<div class="line"> </div>
<div class="line"># Run specific test categories</div>
<div class="line">./yaze_test --unit --verbose</div>
<div class="line">./yaze_test --integration</div>
<div class="line">./yaze_test --e2e --rom-path my_rom.sfc</div>
<div class="line">./yaze_test --zscustomoverworld --verbose</div>
<div class="line"> </div>
<div class="line"># Run specific test patterns</div>
<div class="line">./yaze_test RomTest.*</div>
<div class="line">./yaze_test *ZSCustomOverworld*</div>
<div class="line"> </div>
<div class="line"># Skip ROM-dependent tests</div>
<div class="line">./yaze_test --skip-rom-tests</div>
<div class="line"> </div>
<div class="line"># Enable UI tests</div>
<div class="line">./yaze_test --enable-ui-tests</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md594"></a>
Test Modes</h2>
<ul>
<li><code>--unit</code>: Unit tests only</li>
<li><code>--integration</code>: Integration tests only</li>
<li><code>--e2e</code>: End-to-end tests only</li>
<li><code>--rom-dependent</code>: ROM-dependent tests only</li>
<li><code>--zscustomoverworld</code>: ZSCustomOverworld tests only</li>
<li><code>--core</code>: Core functionality tests</li>
<li><code>--graphics</code>: Graphics tests</li>
<li><code>--editor</code>: Editor tests</li>
<li><code>--deprecated</code>: Deprecated tests (for cleanup)</li>
</ul>
<h2><a class="anchor" id="autotoc_md595"></a>
Options</h2>
<ul>
<li><code>--rom-path PATH</code>: Specify ROM path for testing</li>
<li><code>--skip-rom-tests</code>: Skip tests requiring ROM files</li>
<li><code>--enable-ui-tests</code>: Enable UI tests (requires display)</li>
<li><code>--verbose</code>: Enable verbose output</li>
<li><code>--help</code>: Show help message</li>
</ul>
<h1><a class="anchor" id="autotoc_md596"></a>
E2E ROM Testing</h1>
<p>The E2E ROM test suite (<code><a class="el" href="../../d1/d20/e2e__rom__test_8cc.html">e2e/rom_dependent/e2e_rom_test.cc</a></code>) provides comprehensive validation of the complete ROM editing workflow:</p>
<ol type="1">
<li><b>Load vanilla ROM</b></li>
<li><b>Apply various edits</b> (overworld, dungeon, graphics, etc.)</li>
<li><b>Save changes</b></li>
<li><b>Reload ROM and verify edits persist</b></li>
<li><b>Verify no data corruption occurred</b></li>
</ol>
<h2><a class="anchor" id="autotoc_md597"></a>
Test Cases</h2>
<ul>
<li><code>BasicROMLoadSave</code>: Basic ROM loading and saving</li>
<li><code>OverworldEditWorkflow</code>: Complete overworld editing workflow</li>
<li><code>DungeonEditWorkflow</code>: Complete dungeon editing workflow</li>
<li><code>TransactionSystem</code>: Multi-edit transaction validation</li>
<li><code>CorruptionDetection</code>: ROM corruption detection</li>
<li><code>LargeScaleEditing</code>: Large-scale editing without corruption</li>
</ul>
<h1><a class="anchor" id="autotoc_md598"></a>
ZSCustomOverworld Upgrade Testing</h1>
<p>The ZSCustomOverworld test suite (<code><a class="el" href="../../d7/db2/zscustomoverworld__upgrade__test_8cc.html">e2e/zscustomoverworld/zscustomoverworld_upgrade_test.cc</a></code>) validates version upgrades:</p>
<h2><a class="anchor" id="autotoc_md599"></a>
Supported Upgrades</h2>
<ul>
<li><b>Vanilla → v2</b>: Basic upgrade with main palettes</li>
<li><b>v2 → v3</b>: Advanced upgrade with expanded features</li>
<li><b>Vanilla → v3</b>: Direct upgrade to latest version</li>
</ul>
<h2><a class="anchor" id="autotoc_md600"></a>
Test Cases</h2>
<ul>
<li><code>VanillaBaseline</code>: Validate vanilla ROM baseline</li>
<li><code>VanillaToV2Upgrade</code>: Test vanilla to v2 upgrade</li>
<li><code>V2ToV3Upgrade</code>: Test v2 to v3 upgrade</li>
<li><code>VanillaToV3Upgrade</code>: Test direct vanilla to v3 upgrade</li>
<li><code>AddressValidation</code>: Validate version-specific addresses</li>
<li><code>SaveCompatibility</code>: Test save compatibility between versions</li>
<li><code>FeatureToggle</code>: Test feature enablement/disablement</li>
<li><code>DataIntegrity</code>: Test data integrity during upgrades</li>
</ul>
<h2><a class="anchor" id="autotoc_md601"></a>
Version-Specific Features</h2>
<h3><a class="anchor" id="autotoc_md602"></a>
Vanilla</h3>
<ul>
<li>Basic overworld functionality</li>
<li>Standard message IDs, area graphics, palettes</li>
</ul>
<h3><a class="anchor" id="autotoc_md603"></a>
v2</h3>
<ul>
<li>Main palettes support</li>
<li>Expanded message ID table</li>
</ul>
<h3><a class="anchor" id="autotoc_md604"></a>
v3</h3>
<ul>
<li>Area-specific background colors</li>
<li>Subscreen overlays</li>
<li>Animated GFX</li>
<li>Custom tile GFX groups</li>
<li>Mosaic effects</li>
</ul>
<h1><a class="anchor" id="autotoc_md605"></a>
Environment Variables</h1>
<ul>
<li><code>YAZE_TEST_ROM_PATH</code>: Path to test ROM file</li>
<li><code>YAZE_SKIP_ROM_TESTS</code>: Skip ROM-dependent tests</li>
<li><code>YAZE_ENABLE_UI_TESTS</code>: Enable UI tests</li>
<li><code>YAZE_VERBOSE_TESTS</code>: Enable verbose test output</li>
</ul>
<h1><a class="anchor" id="autotoc_md606"></a>
CI/CD Integration</h1>
<p>Tests are automatically labeled for CI/CD:</p>
<ul>
<li><code>unit</code>: Fast unit tests</li>
<li><code>integration</code>: Medium-speed integration tests</li>
<li><code>e2e</code>: Slow end-to-end tests</li>
<li><code>rom</code>: ROM-dependent tests</li>
<li><code>zscustomoverworld</code>: ZSCustomOverworld specific tests</li>
<li><code>core</code>: Core functionality tests</li>
<li><code>graphics</code>: Graphics tests</li>
<li><code>editor</code>: Editor tests</li>
<li><code>deprecated</code>: Deprecated tests</li>
</ul>
<h1><a class="anchor" id="autotoc_md607"></a>
Deprecated Tests</h1>
<p>The <code>deprecated/</code> directory contains outdated tests that no longer pass after the large refactor:</p>
<ul>
<li><b>EMU tests</b>: CPU, PPU, SPC700, APU tests that are no longer compatible</li>
<li>These tests are kept for reference but should not be run in CI/CD</li>
</ul>
<h1><a class="anchor" id="autotoc_md608"></a>
Best Practices</h1>
<ol type="1">
<li><b>Use appropriate test categories</b> for new tests</li>
<li><b>Add comprehensive E2E tests</b> for new features</li>
<li><b>Test upgrade paths</b> for ZSCustomOverworld features</li>
<li><b>Validate data integrity</b> in all ROM operations</li>
<li><b>Use descriptive test names</b> for AI agent clarity</li>
<li><b>Include verbose output</b> for debugging</li>
</ol>
<h1><a class="anchor" id="autotoc_md609"></a>
AI Agent Testing</h1>
<p>The enhanced test runner is specifically designed for AI agent testing:</p>
<ul>
<li><b>Clear argument structure</b> for easy automation</li>
<li><b>Comprehensive help system</b> for understanding capabilities</li>
<li><b>Verbose output</b> for debugging and validation</li>
<li><b>Flexible test filtering</b> for targeted testing</li>
<li><b>Environment variable support</b> for configuration </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

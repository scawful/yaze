<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yaze: Dependency Management for z3ed</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../yaze.ico"/></td>
  <td id="projectalign">
   <div id="projectname">yaze<span id="projectnumber">&#160;0.3.1</span>
   </div>
   <div id="projectbrief">Link to the Past ROM Editor</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/db2/md_docs_2z3ed_2archive_2DEPENDENCY__MANAGEMENT.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Dependency Management for z3ed</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1171"></a> <b>Last Updated</b>: October 1, 2025 <br  />
 <b>Target Platforms</b>: macOS (arm64/x64), Linux (x64), Windows (x64)</p>
<h1><a class="anchor" id="autotoc_md1172"></a>
Overview</h1>
<p>This document outlines the <b>careful and cautious</b> approach to managing dependencies for z3ed, particularly focusing on the optional gRPC/Protobuf integration for ImGuiTestHarness (IT-01).</p>
<h1><a class="anchor" id="autotoc_md1173"></a>
Philosophy</h1>
<p><b>Key Principles</b>:</p><ol type="1">
<li>✅ <b>Optional by Default</b>: New dependencies are opt-in via CMake flags</li>
<li>✅ <b>Cross-Platform First</b>: Every dependency must work on macOS, Linux, Windows</li>
<li>✅ <b>Fail Gracefully</b>: Build succeeds even if optional deps unavailable</li>
<li>✅ <b>Document Everything</b>: Clear instructions for each platform</li>
<li>✅ <b>Minimal Footprint</b>: Prefer header-only or static linking</li>
</ol>
<h1><a class="anchor" id="autotoc_md1174"></a>
Current Dependencies</h1>
<h2><a class="anchor" id="autotoc_md1175"></a>
Core (Required)</h2>
<p>Managed via vcpkg (<code>vcpkg.json</code>):</p><ul>
<li><b>SDL2</b> (<code>sdl2</code>) - Cross-platform windowing and input<ul>
<li>Version: 2.28.x via vcpkg baseline</li>
<li>Platform: All except UWP</li>
<li>Features: Vulkan support enabled</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1176"></a>
Build Tools (Developer Environment)</h2>
<ul>
<li><b>CMake</b> 3.20+ - Build system</li>
<li><b>vcpkg</b> - C++ package manager (optional, used for SDL2)</li>
<li><b>Compiler</b>: Clang 14+ (macOS/Linux), MSVC 2019+ (Windows)</li>
<li><b>Git</b> - For CMake FetchContent (downloads source during build)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1177"></a>
Optional (Feature Flags)</h2>
<ul>
<li><b>gRPC + Protobuf</b> - For ImGuiTestHarness IPC (IT-01)<ul>
<li>CMake Flag: <code>YAZE_WITH_GRPC=ON</code></li>
<li>Status: <b>Infrastructure exists</b> in <code>cmake/grpc.cmake</code> (FetchContent)</li>
<li>Build Method: <b>Source build via FetchContent</b> (not vcpkg)</li>
<li>Risk Level: <b>Low</b> (builds from source, no dependency hell)</li>
<li>Build Time: ~15-20 minutes first time (downloads + compiles)</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1178"></a>
Existing Build Infrastructure</h1>
<h2><a class="anchor" id="autotoc_md1179"></a>
gRPC via CMake FetchContent (Already Present!)</h2>
<p><b>Good News</b>: YAZE already has comprehensive gRPC support in <code>cmake/grpc.cmake</code>!</p>
<p><b>How It Works</b>:</p><ol type="1">
<li>CMake downloads gRPC + Protobuf source from GitHub</li>
<li>Builds from source during first configure (15-20 minutes)</li>
<li>Caches build artifacts (subsequent builds are fast)</li>
<li><b>No external dependencies</b> (no vcpkg needed for gRPC)</li>
<li>Works identically on all platforms (macOS, Linux, Windows)</li>
</ol>
<p><b>Key Files</b>:</p><ul>
<li><code>cmake/grpc.cmake</code> - FetchContent configuration<ul>
<li>gRPC v1.70.1 (pinned version)</li>
<li>Protobuf v29.3 (pinned version)</li>
<li>Includes <code>target_add_protobuf()</code> helper function</li>
</ul>
</li>
<li><code>cmake/absl.cmake</code> - Abseil (gRPC dependency, already present)</li>
</ul>
<p><b>Advantages Over vcpkg</b>:</p><ul>
<li>✅ <b>Consistent across platforms</b> - Same build process everywhere</li>
<li>✅ <b>No external tools</b> - Just CMake + Git</li>
<li>✅ <b>Reproducible</b> - Pinned versions (v1.70.1, v29.3)</li>
<li>✅ <b>Contributors friendly</b> - Works out of box</li>
<li>✅ <b>No DLL hell</b> - Statically linked</li>
</ul>
<p><b>Why This Is Better</b>: We don't need vcpkg for gRPC! The existing FetchContent approach:</p><ul>
<li>Downloads source during <code>cmake -B build</code></li>
<li>Builds gRPC/Protobuf from scratch (controlled environment)</li>
<li>No version conflicts with system packages</li>
<li>Same result on macOS, Linux, Windows</li>
</ul>
<h1><a class="anchor" id="autotoc_md1180"></a>
Careful Integration Strategy for gRPC</h1>
<h2><a class="anchor" id="autotoc_md1181"></a>
Phase 1: Test Existing Infrastructure (macOS - Current User)</h2>
<p><b>Goal</b>: Verify existing <code>cmake/grpc.cmake</code> works before enabling</p>
<div class="fragment"><div class="line">cd /Users/scawful/Code/yaze</div>
<div class="line"> </div>
<div class="line"># Step 1: Create isolated build directory for testing</div>
<div class="line">mkdir -p build-grpc-test</div>
<div class="line"> </div>
<div class="line"># Step 2: Configure with gRPC enabled</div>
<div class="line">cmake -B build-grpc-test -DYAZE_WITH_GRPC=ON</div>
<div class="line"> </div>
<div class="line"># This will:</div>
<div class="line"># - Download gRPC v1.70.1 from GitHub (~100MB download)</div>
<div class="line"># - Download Protobuf v29.3 from GitHub (~50MB download)</div>
<div class="line"># - Build both from source (~15-20 minutes first time)</div>
<div class="line"># - Cache everything for future builds</div>
<div class="line"> </div>
<div class="line"># Watch for FetchContent progress:</div>
<div class="line">#   -- Fetching grpc...</div>
<div class="line">#   -- Fetching protobuf...</div>
<div class="line">#   -- Building gRPC (this takes time)...</div>
<div class="line"> </div>
<div class="line"># Step 3: Build YAZE with gRPC</div>
<div class="line">cmake --build build-grpc-test --target yaze -j8</div>
<div class="line"> </div>
<div class="line"># Expected outcome:</div>
<div class="line"># - First run: 15-20 minutes (downloading + building gRPC)</div>
<div class="line"># - Subsequent runs: ~30 seconds (using cached gRPC)</div>
<div class="line"># - Binary size increases ~10-15MB (gRPC statically linked)</div>
</div><!-- fragment --><p><b>Success Criteria</b>:</p><ul>
<li>✅ CMake FetchContent downloads gRPC successfully</li>
<li>✅ gRPC builds without errors</li>
<li>✅ YAZE links against gRPC libraries</li>
<li>✅ <code>target_add_protobuf()</code> function available</li>
</ul>
<p><b>Rollback Plan</b>:</p><ul>
<li>If build fails, delete <code>build-grpc-test/</code> directory</li>
<li>Original build untouched: <code>cmake --build build --target yaze -j8</code></li>
<li>No system changes (everything in build directory)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1182"></a>
Phase 2: CMake Integration (No vcpkg.json Changes Yet)</h2>
<p><b>Goal</b>: Add CMake support for gRPC detection without requiring it</p>
<div class="fragment"><div class="line"># Add to root CMakeLists.txt (around line 50, after project())</div>
<div class="line"> </div>
<div class="line"># Optional gRPC support for ImGuiTestHarness</div>
<div class="line">option(YAZE_WITH_GRPC &quot;Enable gRPC-based ImGuiTestHarness (experimental)&quot; OFF)</div>
<div class="line"> </div>
<div class="line">if(YAZE_WITH_GRPC)</div>
<div class="line">  # Try to find gRPC, but don&#39;t fail if missing</div>
<div class="line">  find_package(gRPC CONFIG QUIET)</div>
<div class="line">  find_package(Protobuf CONFIG QUIET)</div>
<div class="line">  </div>
<div class="line">  if(gRPC_FOUND AND Protobuf_FOUND)</div>
<div class="line">    message(STATUS &quot;✓ gRPC support enabled&quot;)</div>
<div class="line">    message(STATUS &quot;  gRPC version: ${gRPC_VERSION}&quot;)</div>
<div class="line">    message(STATUS &quot;  Protobuf version: ${Protobuf_VERSION}&quot;)</div>
<div class="line">    </div>
<div class="line">    set(YAZE_HAS_GRPC TRUE)</div>
<div class="line">    </div>
<div class="line">    # Helper function for .proto compilation (defined later)</div>
<div class="line">    include(cmake/grpc.cmake)</div>
<div class="line">  else()</div>
<div class="line">    message(WARNING &quot;⚠ YAZE_WITH_GRPC=ON but gRPC not found. Disabling gRPC features.&quot;)</div>
<div class="line">    message(WARNING &quot;   Install via: vcpkg install grpc protobuf&quot;)</div>
<div class="line">    message(WARNING &quot;   Or set: CMAKE_TOOLCHAIN_FILE to vcpkg toolchain&quot;)</div>
<div class="line">    </div>
<div class="line">    set(YAZE_HAS_GRPC FALSE)</div>
<div class="line">  endif()</div>
<div class="line">else()</div>
<div class="line">  message(STATUS &quot;○ gRPC support disabled (set YAZE_WITH_GRPC=ON to enable)&quot;)</div>
<div class="line">  set(YAZE_HAS_GRPC FALSE)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line"># Pass to source code</div>
<div class="line">if(YAZE_HAS_GRPC)</div>
<div class="line">  add_compile_definitions(YAZE_WITH_GRPC)</div>
<div class="line">endif()</div>
</div><!-- fragment --><p><b>Key Design Choice</b>: <code>QUIET</code> flag on <code>find_package()</code></p><ul>
<li>If gRPC not found, build continues <b>without errors</b></li>
<li>Clear warning message guides user to install gRPC</li>
<li>Contributor can build YAZE without gRPC</li>
</ul>
<h2><a class="anchor" id="autotoc_md1183"></a>
Phase 3: Create cmake/grpc.cmake Helper</h2>
<div class="fragment"><div class="line"># cmake/grpc.cmake</div>
<div class="line"># Helper functions for gRPC/Protobuf code generation</div>
<div class="line"> </div>
<div class="line">if(NOT YAZE_HAS_GRPC)</div>
<div class="line">  # Guard: only define functions if gRPC available</div>
<div class="line">  return()</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line"># Function: yaze_add_grpc_service(target proto_file)</div>
<div class="line">#   Generates C++ code from .proto and adds to target</div>
<div class="line">#</div>
<div class="line"># Example:</div>
<div class="line">#   yaze_add_grpc_service(yaze </div>
<div class="line">#     ${CMAKE_CURRENT_SOURCE_DIR}/app/core/proto/test_harness.proto)</div>
<div class="line">#</div>
<div class="line">function(yaze_add_grpc_service target proto_file)</div>
<div class="line">  if(NOT TARGET ${target})</div>
<div class="line">    message(FATAL_ERROR &quot;Target &#39;${target}&#39; does not exist&quot;)</div>
<div class="line">  endif()</div>
<div class="line">  </div>
<div class="line">  if(NOT EXISTS ${proto_file})</div>
<div class="line">    message(FATAL_ERROR &quot;Proto file not found: ${proto_file}&quot;)</div>
<div class="line">  endif()</div>
<div class="line">  </div>
<div class="line">  get_filename_component(proto_dir ${proto_file} DIRECTORY)</div>
<div class="line">  get_filename_component(proto_name ${proto_file} NAME_WE)</div>
<div class="line">  </div>
<div class="line">  # Output files</div>
<div class="line">  set(proto_srcs &quot;${CMAKE_CURRENT_BINARY_DIR}/${proto_name}.pb.cc&quot;)</div>
<div class="line">  set(proto_hdrs &quot;${CMAKE_CURRENT_BINARY_DIR}/${proto_name}.pb.h&quot;)</div>
<div class="line">  set(grpc_srcs &quot;${CMAKE_CURRENT_BINARY_DIR}/${proto_name}.grpc.pb.cc&quot;)</div>
<div class="line">  set(grpc_hdrs &quot;${CMAKE_CURRENT_BINARY_DIR}/${proto_name}.grpc.pb.h&quot;)</div>
<div class="line">  </div>
<div class="line">  # Custom command to run protoc</div>
<div class="line">  add_custom_command(</div>
<div class="line">    OUTPUT ${proto_srcs} ${proto_hdrs} ${grpc_srcs} ${grpc_hdrs}</div>
<div class="line">    COMMAND protobuf::protoc</div>
<div class="line">      --proto_path=${proto_dir}</div>
<div class="line">      --cpp_out=${CMAKE_CURRENT_BINARY_DIR}</div>
<div class="line">      --grpc_out=${CMAKE_CURRENT_BINARY_DIR}</div>
<div class="line">      --plugin=protoc-gen-grpc=$&lt;TARGET_FILE:gRPC::grpc_cpp_plugin&gt;</div>
<div class="line">      ${proto_file}</div>
<div class="line">    DEPENDS ${proto_file} protobuf::protoc gRPC::grpc_cpp_plugin</div>
<div class="line">    COMMENT &quot;Generating C++ from ${proto_name}.proto&quot;</div>
<div class="line">    VERBATIM</div>
<div class="line">  )</div>
<div class="line">  </div>
<div class="line">  # Add generated sources to target</div>
<div class="line">  target_sources(${target} PRIVATE</div>
<div class="line">    ${proto_srcs}</div>
<div class="line">    ${grpc_srcs}</div>
<div class="line">  )</div>
<div class="line">  </div>
<div class="line">  # Add include directory for generated headers</div>
<div class="line">  target_include_directories(${target} PRIVATE</div>
<div class="line">    ${CMAKE_CURRENT_BINARY_DIR}</div>
<div class="line">  )</div>
<div class="line">  </div>
<div class="line">  # Link gRPC libraries</div>
<div class="line">  target_link_libraries(${target} PRIVATE</div>
<div class="line">    gRPC::grpc++</div>
<div class="line">    gRPC::grpc++_reflection</div>
<div class="line">    protobuf::libprotobuf</div>
<div class="line">  )</div>
<div class="line">  </div>
<div class="line">  message(STATUS &quot;  Added gRPC service: ${proto_name}.proto -&gt; ${target}&quot;)</div>
<div class="line">endfunction()</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1184"></a>
Phase 4: Test on Second Platform (Linux VM)</h2>
<p><b>Goal</b>: Validate cross-platform before committing</p>
<div class="fragment"><div class="line"># On Linux VM (Ubuntu 22.04 or similar)</div>
<div class="line">sudo apt update</div>
<div class="line">sudo apt install -y build-essential cmake git</div>
<div class="line"> </div>
<div class="line"># Install vcpkg</div>
<div class="line">cd ~/</div>
<div class="line">git clone https://github.com/Microsoft/vcpkg.git</div>
<div class="line">cd vcpkg</div>
<div class="line">./bootstrap-vcpkg.sh</div>
<div class="line"> </div>
<div class="line"># Install gRPC</div>
<div class="line">./vcpkg install grpc:x64-linux protobuf:x64-linux</div>
<div class="line"> </div>
<div class="line"># Clone YAZE (your branch)</div>
<div class="line">cd ~/</div>
<div class="line">git clone https://github.com/scawful/yaze.git</div>
<div class="line">cd yaze</div>
<div class="line">git checkout feature/it-01-grpc</div>
<div class="line"> </div>
<div class="line"># Build with gRPC</div>
<div class="line">cmake -B build \</div>
<div class="line">  -DCMAKE_TOOLCHAIN_FILE=$HOME/vcpkg/scripts/buildsystems/vcpkg.cmake \</div>
<div class="line">  -DYAZE_WITH_GRPC=ON</div>
<div class="line">cmake --build build -j$(nproc)</div>
<div class="line"> </div>
<div class="line"># Expected: Same result as macOS (successful build)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1185"></a>
Phase 5: Test on Windows (VM or Contributor)</h2>
<p><b>Goal</b>: Validate most complex platform</p>
<div class="fragment"><div class="line"># On Windows (PowerShell as Administrator)</div>
<div class="line"> </div>
<div class="line"># Install vcpkg</div>
<div class="line">cd C:\</div>
<div class="line">git clone https://github.com/Microsoft/vcpkg.git</div>
<div class="line">cd C:\vcpkg</div>
<div class="line">.\bootstrap-vcpkg.bat</div>
<div class="line">.\vcpkg integrate install</div>
<div class="line"> </div>
<div class="line"># Install gRPC (takes 10-15 minutes first time)</div>
<div class="line">.\vcpkg install grpc:x64-windows protobuf:x64-windows</div>
<div class="line"> </div>
<div class="line"># Clone YAZE</div>
<div class="line">cd C:\Users\YourName\Code</div>
<div class="line">git clone https://github.com/scawful/yaze.git</div>
<div class="line">cd yaze</div>
<div class="line">git checkout feature/it-01-grpc</div>
<div class="line"> </div>
<div class="line"># Configure with Visual Studio generator</div>
<div class="line">cmake -B build `</div>
<div class="line">  -DCMAKE_TOOLCHAIN_FILE=C:\vcpkg\scripts\buildsystems\vcpkg.cmake `</div>
<div class="line">  -DYAZE_WITH_GRPC=ON `</div>
<div class="line">  -A x64</div>
<div class="line"> </div>
<div class="line"># Build (Release config)</div>
<div class="line">cmake --build build --config Release</div>
<div class="line"> </div>
<div class="line"># Expected: Successful build, yaze.exe in build/bin/Release/</div>
</div><!-- fragment --><p><b>Windows-Specific Concerns</b>:</p><ul>
<li>⚠️ <b>Build Time</b>: gRPC takes 10-15 minutes to compile on Windows (one-time)</li>
<li>⚠️ <b>DLL Paths</b>: vcpkg handles this via <code>vcpkg integrate install</code></li>
<li>⚠️ <b>MSVC Version</b>: Requires Visual Studio 2019+ with C++ workload</li>
</ul>
<h2><a class="anchor" id="autotoc_md1186"></a>
Phase 6: Only Then Add to vcpkg.json</h2>
<p><b>Trigger</b>: All 3 platforms validated (macOS ✅, Linux ✅, Windows ✅)</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;name&quot;: &quot;yaze&quot;,</div>
<div class="line">  &quot;version&quot;: &quot;0.3.2&quot;,</div>
<div class="line">  &quot;dependencies&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;name&quot;: &quot;sdl2&quot;,</div>
<div class="line">      &quot;platform&quot;: &quot;!uwp&quot;,</div>
<div class="line">      &quot;features&quot;: [&quot;vulkan&quot;]</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;name&quot;: &quot;grpc&quot;,</div>
<div class="line">      &quot;features&quot;: [&quot;codegen&quot;],</div>
<div class="line">      &quot;platform&quot;: &quot;!android &amp; !uwp&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;protobuf&quot;</div>
<div class="line">  ],</div>
<div class="line">  &quot;builtin-baseline&quot;: &quot;4bee3f5aae7aefbc129ca81c33d6a062b02fcf3b&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Documentation Update</b>: Add to <code><a class="el" href="../../d2/d14/02-build-instructions_8md.html">docs/02-build-instructions.md</a></code>: </p><div class="fragment"><div class="line">### Building with gRPC Support (Optional)</div>
<div class="line"> </div>
<div class="line">gRPC enables the ImGuiTestHarness for automated GUI testing.</div>
<div class="line"> </div>
<div class="line">**Prerequisites**:</div>
<div class="line">- vcpkg installed and integrated</div>
<div class="line">- CMake 3.20+</div>
<div class="line">- 15-20 minutes for first-time gRPC build</div>
<div class="line"> </div>
<div class="line">**Build Steps**:</div>
</div><!-- fragment --><p> bash </p>
<h1><a class="anchor" id="autotoc_md1187"></a>
macOS/Linux</h1>
<p>cmake -B build -DYAZE_WITH_GRPC=ON cmake &ndash;build build -j8</p>
<h1><a class="anchor" id="autotoc_md1188"></a>
Windows (PowerShell)</h1>
<p>cmake -B build -DYAZE_WITH_GRPC=ON -A x64 cmake &ndash;build build &ndash;config Release </p><div class="fragment"><div class="line">**Troubleshooting**:</div>
<div class="line">- If gRPC not found: `vcpkg install grpc protobuf`</div>
<div class="line">- On Windows: Ensure Developer Command Prompt for VS</div>
<div class="line">- Build errors: See `docs/z3ed/DEPENDENCY_MANAGEMENT.md`</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1189"></a>
Rollback Strategy</h2>
<p>If gRPC integration causes issues:</p>
<h3><a class="anchor" id="autotoc_md1190"></a>
Immediate Rollback (During Development)</h3>
<div class="fragment"><div class="line"># Disable gRPC, revert to working build</div>
<div class="line">cmake -B build -DYAZE_WITH_GRPC=OFF</div>
<div class="line">cmake --build build -j8</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1191"></a>
Full Rollback (If Committing Breaks CI)</h3>
<div class="fragment"><div class="line">git revert &lt;commit-hash&gt;  # Revert CMake changes</div>
<div class="line"># Edit vcpkg.json to remove grpc/protobuf</div>
<div class="line">git add vcpkg.json CMakeLists.txt cmake/grpc.cmake</div>
<div class="line">git commit -m &quot;Rollback: Remove gRPC integration (build issues)&quot;</div>
<div class="line">git push</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1192"></a>
Dependency Testing Checklist</h2>
<p>Before merging gRPC integration:</p>
<h3><a class="anchor" id="autotoc_md1193"></a>
macOS (Developer Machine)</h3>
<ul>
<li>[ ] Clean build with <code>YAZE_WITH_GRPC=OFF</code> succeeds</li>
<li>[ ] Clean build with <code>YAZE_WITH_GRPC=ON</code> succeeds</li>
<li>[ ] Binary runs and starts without crashes</li>
<li>[ ] File size reasonable (~50MB app bundle + ~5MB gRPC overhead)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1194"></a>
Linux (VM or CI)</h3>
<ul>
<li>[ ] Ubuntu 22.04 clean build succeeds</li>
<li>[ ] Fedora/RHEL clean build succeeds (optional)</li>
<li>[ ] Binary links against system glibc correctly</li>
</ul>
<h3><a class="anchor" id="autotoc_md1195"></a>
Windows (VM or Contributor)</h3>
<ul>
<li>[ ] Visual Studio 2019 build succeeds</li>
<li>[ ] Visual Studio 2022 build succeeds</li>
<li>[ ] Release build runs without DLL errors</li>
<li>[ ] Installer (CPack) includes gRPC DLLs if needed</li>
</ul>
<h3><a class="anchor" id="autotoc_md1196"></a>
CI/CD</h3>
<ul>
<li>[ ] GitHub Actions workflow passes on all platforms</li>
<li>[ ] Build artifacts uploaded successfully</li>
<li>[ ] No increased build time for default builds (gRPC off)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1197"></a>
Communication Plan</h2>
<h3><a class="anchor" id="autotoc_md1198"></a>
Contributors Without gRPC</h3>
<p>Update <code><a class="el" href="../../dc/dd0/B1-contributing_8md.html">docs/B1-contributing.md</a></code>: </p><div class="fragment"><div class="line">### Optional Features</div>
<div class="line"> </div>
<div class="line">Some YAZE features are optional and require additional dependencies:</div>
<div class="line"> </div>
<div class="line">- **gRPC Test Harness** (`YAZE_WITH_GRPC=ON`): For automated GUI testing</div>
<div class="line">  - Not required for general YAZE development</div>
<div class="line">  - Adds 10-15 minutes to initial build time</div>
<div class="line">  - See `docs/z3ed/DEPENDENCY_MANAGEMENT.md` for setup</div>
<div class="line"> </div>
<div class="line">You can build and contribute to YAZE without these optional features.</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1199"></a>
PR Description Template</h3>
<div class="fragment"><div class="line">## Dependency Changes</div>
<div class="line"> </div>
<div class="line">This PR adds optional gRPC support for ImGuiTestHarness.</div>
<div class="line"> </div>
<div class="line">**Impact**:</div>
<div class="line">- ✅ Existing builds unaffected (opt-in via `-DYAZE_WITH_GRPC=ON`)</div>
<div class="line">- ✅ Cross-platform validated (macOS ✅, Linux ✅, Windows ✅)</div>
<div class="line">- ⚠️ First build with gRPC takes 10-15 minutes (one-time)</div>
<div class="line"> </div>
<div class="line">**Testing**:</div>
<div class="line">- [x] macOS arm64 build successful</div>
<div class="line">- [x] Linux x64 build successful</div>
<div class="line">- [x] Windows x64 build successful</div>
<div class="line">- [x] Default build (gRPC off) unchanged</div>
<div class="line"> </div>
<div class="line">**Documentation**:</div>
<div class="line">- Updated: `docs/02-build-instructions.md`</div>
<div class="line">- Created: `docs/z3ed/DEPENDENCY_MANAGEMENT.md`</div>
<div class="line">- Updated: `docs/z3ed/IT-01-getting-started-grpc.md`</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1200"></a>
Future Considerations</h2>
<h3><a class="anchor" id="autotoc_md1201"></a>
Other Optional Dependencies (Lessons Learned)</h3>
<ul>
<li><b>ImPlot</b> - For graphing/visualization</li>
<li><b>libcurl</b> - For HTTP requests (alternative to gRPC)</li>
<li><b>SQLite</b> - For persistent state (alternative to JSON files)</li>
</ul>
<p><b>Pattern to Follow</b>:</p><ol type="1">
<li>Test locally with isolated vcpkg first</li>
<li>Add CMake <code>option()</code> with <code>QUIET</code> find_package</li>
<li>Validate on 3 platforms minimum</li>
<li>Document setup and troubleshooting</li>
<li>Only then add to vcpkg.json</li>
</ol>
<h3><a class="anchor" id="autotoc_md1202"></a>
Dependency Pinning</h3>
<p>Consider pinning gRPC version after validation: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;overrides&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;name&quot;: &quot;grpc&quot;,</div>
<div class="line">      &quot;version&quot;: &quot;1.60.0&quot;</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>When to Pin</b>:</p><ul>
<li>After successful Windows validation</li>
<li>Before announcing feature to contributors</li>
<li>To ensure reproducible builds</li>
</ul>
<hr  />
<p><b>Summary</b>: We're taking a <b>careful, incremental approach</b> to adding gRPC:</p><ol type="1">
<li>✅ Test locally on macOS (isolated vcpkg)</li>
<li>✅ Add CMake support with graceful fallback</li>
<li>✅ Validate on Linux</li>
<li>✅ Validate on Windows</li>
<li>✅ Only then commit to vcpkg.json</li>
<li>✅ Document everything</li>
</ol>
<p>This ensures existing contributors aren't impacted while we experiment with gRPC. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

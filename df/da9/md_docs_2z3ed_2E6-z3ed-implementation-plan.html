<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yaze: z3ed Agentic Workflow Implementation Plan</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../yaze.ico"/></td>
  <td id="projectalign">
   <div id="projectname">yaze<span id="projectnumber">&#160;0.3.1</span>
   </div>
   <div id="projectbrief">Link to the Past ROM Editor</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('df/da9/md_docs_2z3ed_2E6-z3ed-implementation-plan.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">z3ed Agentic Workflow Implementation Plan</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1700"></a> <b>Last Updated</b>: October 2, 2025 <br  />
 <b>Status</b>: IT-01 Complete ✅ | AW-03 Complete ✅ | E2E Validation Phase</p>
<blockquote class="doxtable">
<p>&zwj;📋 <b>See Also</b>: <a class="el" href="../../de/dd3/md_docs_2z3ed_2NEXT__PRIORITIES__OCT2.html">NEXT_PRIORITIES_OCT2.md</a> for detailed implementation guides for current priorities. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md1701"></a>
Executive Summary</h1>
<p>The z3ed CLI and AI agent workflow system has completed major infrastructure milestones:</p>
<p><b>✅ Completed Phases</b>:</p><ul>
<li><b>Phase 6</b>: Resource Catalogue - Machine-readable API specs for AI consumption</li>
<li><b>AW-01/02/03</b>: Acceptance Workflow - Proposal tracking, sandbox management, GUI review with ROM merging</li>
<li><b>IT-01</b>: ImGuiTestHarness - Full GUI automation via gRPC + ImGuiTestEngine (all 3 phases complete)</li>
</ul>
<p><b>🔄 Active Phase</b>:</p><ul>
<li><b>Priority 1</b>: End-to-End Workflow Validation - Test complete proposal lifecycle with real GUI</li>
</ul>
<p><b>📋 Next Phases</b>:</p><ul>
<li><b>Priority 2</b>: CLI Agent Test Command (IT-02) - Natural language → automated GUI testing</li>
<li><b>Priority 3</b>: Policy Evaluation Framework (AW-04) - YAML-based constraints for proposal acceptance</li>
</ul>
<h1><a class="anchor" id="autotoc_md1702"></a>
Quick Reference</h1>
<p><b>Start Test Harness</b>: </p><div class="fragment"><div class="line">./build-grpc-test/bin/yaze.app/Contents/MacOS/yaze \</div>
<div class="line">  --enable_test_harness \</div>
<div class="line">  --test_harness_port=50052 \</div>
<div class="line">  --rom_file=assets/zelda3.sfc &amp;</div>
</div><!-- fragment --><p><b>Test All RPCs</b>: </p><div class="fragment"><div class="line">./scripts/test_harness_e2e.sh</div>
</div><!-- fragment --><p><b>Create Proposal</b>: </p><div class="fragment"><div class="line">./build/bin/z3ed agent run &quot;Test prompt&quot; --sandbox</div>
<div class="line">./build/bin/z3ed agent list</div>
<div class="line">./build/bin/z3ed agent diff --proposal-id &lt;ID&gt;</div>
</div><!-- fragment --><p><b>Review in GUI</b>:</p><ul>
<li>Open YAZE → <code>Debug → Agent Proposals</code></li>
<li>Select proposal → Review → Accept/Reject/Delete</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md1704"></a>
1. Current Priorities (Week of Oct 2-8, 2025)</h1>
<p><b>Status</b>: Phase 1 Complete ✅ | Phase 2 Complete ✅ | Phase 3 Complete ✅</p>
<h2><a class="anchor" id="autotoc_md1705"></a>
Priority 1: End-to-End Workflow Validation (ACTIVE) 🔄</h2>
<p><b>Goal</b>: Validate complete AI agent workflow from proposal creation to ROM commit <br  />
 <b>Time Estimate</b>: 2-3 hours <br  />
 <b>Status</b>: Ready to execute</p>
<p><b>Task Checklist</b>:</p><ol type="1">
<li>✅ <b>E2E Test Script</b>: Already created (<code>scripts/test_harness_e2e.sh</code>)</li>
<li>📋 <b>Manual Testing Workflow</b>:<ul>
<li>Start YAZE with test harness enabled</li>
<li>Create proposal via CLI: <code>z3ed agent run "Test prompt" --sandbox</code></li>
<li>Verify proposal appears in ProposalDrawer GUI</li>
<li>Test Accept → validate ROM merge and save prompt</li>
<li>Test Reject → validate status update</li>
<li>Test Delete → validate cleanup</li>
</ul>
</li>
<li>📋 <b>Real Widget Testing</b>:<ul>
<li>Click actual YAZE buttons (Overworld, Dungeon, etc.)</li>
<li>Type into real input fields</li>
<li>Wait for actual windows to appear</li>
<li>Assert on real widget states</li>
</ul>
</li>
<li>📋 <b>Document Edge Cases</b>:<ul>
<li>Widget not found scenarios</li>
<li>Timeout handling</li>
<li>Error recovery patterns</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1706"></a>
Priority 2: CLI Agent Test Command (IT-02) 📋 NEXT</h2>
<p><b>Goal</b>: Natural language → automated GUI testing via gRPC <br  />
 <b>Time Estimate</b>: 4-6 hours <br  />
 <b>Blocking Dependency</b>: Priority 1 completion</p>
<p><b>Implementation Tasks</b>:</p><ol type="1">
<li><b>Create <code>z3ed agent test</code> command</b>:<ul>
<li>Parse natural language prompt</li>
<li>Generate RPC call sequence (Click → Wait → Assert)</li>
<li>Execute via gRPC client</li>
<li>Capture results and screenshots</li>
</ul>
</li>
<li><b>Example Usage</b>: <div class="fragment"><div class="line">z3ed agent test --prompt &quot;Open Overworld editor and verify it loads&quot; \</div>
<div class="line">  --rom zelda3.sfc</div>
<div class="line"> </div>
<div class="line"># Generated workflow:</div>
<div class="line"># 1. Click &quot;button:Overworld&quot;</div>
<div class="line"># 2. Wait &quot;window_visible:Overworld Editor&quot; (5s)</div>
<div class="line"># 3. Assert &quot;visible:Overworld Editor&quot;</div>
<div class="line"># 4. Screenshot &quot;full&quot;</div>
</div><!-- fragment --></li>
<li><b>Implementation Files</b>:<ul>
<li><code><a class="el" href="../../d2/d0e/agent_8cc.html">src/cli/handlers/agent.cc</a></code> - Add <code>HandleTestCommand()</code></li>
<li><code>src/cli/service/gui_automation_client.{h,cc}</code> - gRPC client wrapper</li>
<li><code>src/cli/service/test_workflow_generator.{h,cc}</code> - Prompt → RPC translator</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1707"></a>
Priority 3: Policy Evaluation Framework (AW-04) 📋</h2>
<p><b>Goal</b>: YAML-based constraint system for gating proposal acceptance <br  />
 <b>Time Estimate</b>: 6-8 hours <br  />
 <b>Blocking Dependency</b>: None (can work in parallel)</p>
<blockquote class="doxtable">
<p>&zwj;� <b>Detailed Guides</b>: See <a class="el" href="../../de/dd3/md_docs_2z3ed_2NEXT__PRIORITIES__OCT2.html">NEXT_PRIORITIES_OCT2.md</a> for complete implementation breakdowns with code examples. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md1708"></a>
&lt;/blockquote&gt;</h1>
<h1><a class="anchor" id="autotoc_md1709"></a>
2. Workstreams Overview</h1>
<p>This plan decomposes the design additions into actionable engineering tasks. Each workstream contains milestones, blocking dependencies, and expected deliverables.</p><ol type="1">
<li><code><a class="el" href="../../d4/d1a/cli_2handlers_2rom_8cc.html">src/cli/handlers/rom.cc</a></code> - Added <code>RomInfo::Run</code> implementation</li>
<li><code><a class="el" href="../../d3/dfa/z3ed_8h.html">src/cli/z3ed.h</a></code> - Added <code>RomInfo</code> class declaration <br  />
</li>
<li><code><a class="el" href="../../dc/d8b/modern__cli_8cc.html">src/cli/modern_cli.cc</a></code> - Updated <code>HandleRomInfoCommand</code> routing </li>
</ol>
<h1><a class="anchor" id="autotoc_md1710"></a>
4. &lt;tt&gt;src/cli/service/resource_catalog.cc&lt;/tt&gt; - Added &lt;tt&gt;rom info&lt;/tt&gt; schema entry</h1>
<h1><a class="anchor" id="autotoc_md1711"></a>
2. Workstreams Overview</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Workstream   </th><th class="markdownTableHeadNone">Goal   </th><th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Resource Catalogue   </td><td class="markdownTableBodyNone">Machine-readable CLI specs for AI consumption   </td><td class="markdownTableBodyNone">✅ Complete   </td><td class="markdownTableBodyNone"><code>docs/api/z3ed-resources.yaml</code> generated    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Acceptance Workflow   </td><td class="markdownTableBodyNone">Human review/approval of agent proposals   </td><td class="markdownTableBodyNone">✅ Complete   </td><td class="markdownTableBodyNone">ProposalDrawer with ROM merging operational    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ImGuiTest Bridge   </td><td class="markdownTableBodyNone">Automated GUI testing via gRPC   </td><td class="markdownTableBodyNone">✅ Complete   </td><td class="markdownTableBodyNone">All 3 phases done (11 hours)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Verification Pipeline   </td><td class="markdownTableBodyNone">Layered testing + CI coverage   </td><td class="markdownTableBodyNone">📋 In Progress   </td><td class="markdownTableBodyNone">E2E validation phase    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Telemetry &amp; Learning   </td><td class="markdownTableBodyNone">Capture signals for improvement   </td><td class="markdownTableBodyNone">📋 Planned   </td><td class="markdownTableBodyNone">Optional/opt-in (Phase 8)   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1712"></a>
Completed Work Summary</h2>
<p><b>Resource Catalogue (RC)</b> ✅:</p><ul>
<li>CLI flag passthrough and resource catalog system</li>
<li><code>agent describe</code> exports YAML/JSON schemas</li>
<li><code>docs/api/z3ed-resources.yaml</code> maintained</li>
<li>All ROM/Palette/Overworld/Dungeon/Patch commands documented</li>
</ul>
<p><b>Acceptance Workflow (AW-01/02/03)</b> ✅:</p><ul>
<li><code>ProposalRegistry</code> with disk persistence and cross-session tracking</li>
<li><code>RomSandboxManager</code> for isolated ROM copies</li>
<li><code>agent list</code> and <code>agent diff</code> commands</li>
<li><b>ProposalDrawer GUI</b>: List/detail views, Accept/Reject/Delete, ROM merging</li>
<li>Integrated into EditorManager (<code>Debug → Agent Proposals</code>)</li>
</ul>
<p><b>ImGuiTestHarness (IT-01)</b> ✅:</p><ul>
<li>Phase 1: gRPC infrastructure (6 RPC methods)</li>
<li>Phase 2: TestManager integration with dynamic tests</li>
<li>Phase 3: Full ImGuiTestEngine (Type/Wait/Assert RPCs)</li>
<li>E2E test script: <code>scripts/test_harness_e2e.sh</code></li>
<li>Documentation: <a class="el" href="../../d2/d82/IT-01-QUICKSTART_8md.html">IT-01-QUICKSTART.md</a></li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md1714"></a>
3. Task Backlog</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ID   </th><th class="markdownTableHeadNone">Task   </th><th class="markdownTableHeadNone">Workstream   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Dependencies    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RC-01   </td><td class="markdownTableBodyNone">Define schema for <code>ResourceCatalog</code> entries and implement serialization helpers.   </td><td class="markdownTableBodyNone">Resource Catalogue   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">Schema system complete with all resource types documented    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">RC-02   </td><td class="markdownTableBodyNone">Auto-generate <code>docs/api/z3ed-resources.yaml</code> from command annotations.   </td><td class="markdownTableBodyNone">Resource Catalogue   </td><td class="markdownTableBodyNone">Tooling   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">Generated and committed to docs/api/    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RC-03   </td><td class="markdownTableBodyNone">Implement <code>z3ed agent describe</code> CLI surface returning JSON schemas.   </td><td class="markdownTableBodyNone">Resource Catalogue   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">Both YAML and JSON output formats working    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">RC-04   </td><td class="markdownTableBodyNone">Integrate schema export with TUI command palette + help overlays.   </td><td class="markdownTableBodyNone">Resource Catalogue   </td><td class="markdownTableBodyNone">UX   </td><td class="markdownTableBodyNone">Planned   </td><td class="markdownTableBodyNone">RC-03    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RC-05   </td><td class="markdownTableBodyNone">Harden CLI command routing/flag parsing to unblock agent automation.   </td><td class="markdownTableBodyNone">Resource Catalogue   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">Fixed rom info handler to use FLAGS_rom    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AW-01   </td><td class="markdownTableBodyNone">Implement sandbox ROM cloning and tracking (<code>RomSandboxManager</code>).   </td><td class="markdownTableBodyNone">Acceptance Workflow   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">ROM sandbox manager operational with lifecycle management    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AW-02   </td><td class="markdownTableBodyNone">Build proposal registry service storing diffs, logs, screenshots.   </td><td class="markdownTableBodyNone">Acceptance Workflow   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">ProposalRegistry implemented with disk persistence    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AW-03   </td><td class="markdownTableBodyNone">Add <a class="el" href="../../df/de4/namespaceImGui.html">ImGui</a> drawer for proposals with accept/reject controls.   </td><td class="markdownTableBodyNone">Acceptance Workflow   </td><td class="markdownTableBodyNone">UX   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">ProposalDrawer GUI complete with ROM merging    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AW-04   </td><td class="markdownTableBodyNone">Implement policy evaluation for gating accept buttons.   </td><td class="markdownTableBodyNone">Acceptance Workflow   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">In Progress   </td><td class="markdownTableBodyNone">AW-03, Priority 2 - YAML policies + PolicyEvaluator    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AW-05   </td><td class="markdownTableBodyNone">Draft <code>.z3ed-diff</code> hybrid schema (binary deltas + JSON metadata).   </td><td class="markdownTableBodyNone">Acceptance Workflow   </td><td class="markdownTableBodyNone">Design   </td><td class="markdownTableBodyNone">Planned   </td><td class="markdownTableBodyNone">AW-01    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">IT-01   </td><td class="markdownTableBodyNone">Create <code>ImGuiTestHarness</code> IPC service embedded in <code>yaze_test</code>.   </td><td class="markdownTableBodyNone">ImGuiTest Bridge   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">✅ Phase 1+2+3 Complete - Full GUI automation with gRPC + ImGuiTestEngine    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">IT-02   </td><td class="markdownTableBodyNone">Implement CLI agent step translation (<code>imgui_action</code> → harness call).   </td><td class="markdownTableBodyNone">ImGuiTest Bridge   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">In Progress   </td><td class="markdownTableBodyNone">IT-01, <code>z3ed agent test</code> command with natural language prompts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">IT-03   </td><td class="markdownTableBodyNone">Provide synchronization primitives (<code>WaitForIdle</code>, etc.).   </td><td class="markdownTableBodyNone">ImGuiTest Bridge   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">Done   </td><td class="markdownTableBodyNone">✅ Wait RPC with condition polling already implemented in IT-01 Phase 3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">VP-01   </td><td class="markdownTableBodyNone">Expand CLI unit tests for new commands and sandbox flow.   </td><td class="markdownTableBodyNone">Verification Pipeline   </td><td class="markdownTableBodyNone">Test   </td><td class="markdownTableBodyNone">Planned   </td><td class="markdownTableBodyNone">RC/AW tasks    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">VP-02   </td><td class="markdownTableBodyNone">Add harness integration tests with replay scripts.   </td><td class="markdownTableBodyNone">Verification Pipeline   </td><td class="markdownTableBodyNone">Test   </td><td class="markdownTableBodyNone">Planned   </td><td class="markdownTableBodyNone">IT tasks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">VP-03   </td><td class="markdownTableBodyNone">Create CI job running agent smoke tests with <code>YAZE_WITH_JSON</code>.   </td><td class="markdownTableBodyNone">Verification Pipeline   </td><td class="markdownTableBodyNone">Infra   </td><td class="markdownTableBodyNone">Planned   </td><td class="markdownTableBodyNone">VP-01, VP-02    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TL-01   </td><td class="markdownTableBodyNone">Capture accept/reject metadata and push to telemetry log.   </td><td class="markdownTableBodyNone">Telemetry &amp; Learning   </td><td class="markdownTableBodyNone">Code   </td><td class="markdownTableBodyNone">Planned   </td><td class="markdownTableBodyNone">AW tasks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TL-02   </td><td class="markdownTableBodyNone">Build anonymized metrics exporter + opt-in toggle.   </td><td class="markdownTableBodyNone">Telemetry &amp; Learning   </td><td class="markdownTableBodyNone">Infra   </td><td class="markdownTableBodyNone">Planned   </td><td class="markdownTableBodyNone">TL-01   </td></tr>
</table>
<p><em>Status Legend: Prototype · In Progress · Planned · Blocked · Done</em></p>
<h1><a class="anchor" id="autotoc_md1715"></a>
3. Immediate Next Steps (Week of Oct 1-7, 2025)</h1>
<h2><a class="anchor" id="autotoc_md1716"></a>
Priority 0: Testing &amp; Validation (Active)</h2>
<ol type="1">
<li><b>TEST</b>: Complete end-to-end proposal workflow<ul>
<li>Launch YAZE and verify ProposalDrawer displays live proposals</li>
<li>Test Accept action → verify ROM merge and save prompt</li>
<li>Test Reject and Delete actions</li>
<li>Validate filtering and refresh functionality</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1717"></a>
Priority 1: ImGuiTestHarness Foundation (IT-01) ✅ PHASE 2 COMPLETE</h2>
<p><b>Rationale</b>: Required for automated GUI testing and remote control of YAZE for AI workflows <br  />
 <b>Decision</b>: ✅ <b>Use gRPC</b> - Production-grade, cross-platform, type-safe (see <code><a class="el" href="../../da/d55/IT-01-grpc-evaluation_8md.html">IT-01-grpc-evaluation.md</a></code>)</p>
<p><b>Status</b>: Phase 1 Complete ✅ | Phase 2 Complete ✅ | Phase 3 Planned �</p>
<h3><a class="anchor" id="autotoc_md1718"></a>
Phase 1: gRPC Infrastructure ✅ COMPLETE</h3>
<ul>
<li>✅ Add gRPC to build system via FetchContent</li>
<li>✅ Create .proto schema (Ping, Click, Type, Wait, Assert, Screenshot)</li>
<li>✅ Implement gRPC server with all 6 RPC stubs</li>
<li>✅ Test with grpcurl - all RPCs responding</li>
<li>✅ Server lifecycle management (Start/Shutdown)</li>
<li>✅ Cross-platform build verified (macOS ARM64)</li>
</ul>
<p><b>See</b>: <code><a class="el" href="../../da/dc2/GRPC__TEST__SUCCESS_8md.html">GRPC_TEST_SUCCESS.md</a></code> for Phase 1 completion details</p>
<h3><a class="anchor" id="autotoc_md1719"></a>
Phase 2: ImGuiTestEngine Integration ✅ COMPLETE</h3>
<p><b>Goal</b>: Replace stub RPC handlers with actual GUI automation <br  />
 <b>Status</b>: Infrastructure complete, dynamic test registration implemented <br  />
 <b>Time Spent</b>: ~4 hours</p>
<p><b>Implementation Guide</b>: 📖 <b><a class="el" href="../../d9/d18/IT-01-PHASE2-IMPLEMENTATION-GUIDE_8md.html">IT-01-PHASE2-IMPLEMENTATION-GUIDE.md</a></b></p>
<p><b>Completed Tasks</b>:</p><ol type="1">
<li>✅ <b>TestManager Integration</b> - gRPC service receives TestManager reference</li>
<li>✅ <b>Build System</b> - Successfully compiles with ImGuiTestEngine support <br  />
</li>
<li>✅ <b>Server Startup</b> - gRPC server starts correctly on macOS with test harness flag</li>
<li>✅ <b>Dynamic Test Registration</b> - Click RPC uses <code>IM_REGISTER_TEST()</code> macro for dynamic tests</li>
<li>✅ <b>Stub Handlers</b> - Type/Wait/Assert RPCs return success (implementation pending Phase 3)</li>
<li>✅ <b>Ping RPC</b> - Fully functional, returns YAZE version and timestamp</li>
</ol>
<p><b>Key Learnings</b>:</p><ul>
<li>ImGuiTestEngine requires test registration - can't call test functions directly</li>
<li>Test context provided by engine via <code>test-&gt;Output.Status</code> not <code>test-&gt;Status</code></li>
<li>YAZE uses custom flag system with <code>FLAGS_name-&gt;Get()</code> pattern</li>
<li>Correct flags: <code>--enable_test_harness</code>, <code>--test_harness_port</code>, <code>--rom_file</code></li>
</ul>
<p><b>Testing Results</b>: </p><div class="fragment"><div class="line"># Server starts successfully</div>
<div class="line">./build-grpc-test/bin/yaze.app/Contents/MacOS/yaze \</div>
<div class="line">  --enable_test_harness \</div>
<div class="line">  --test_harness_port=50052 \</div>
<div class="line">  --rom_file=assets/zelda3.sfc &amp;</div>
<div class="line"> </div>
<div class="line"># Ping RPC working</div>
<div class="line">grpcurl -plaintext -d &#39;{&quot;message&quot;:&quot;test&quot;}&#39; \</div>
<div class="line">  127.0.0.1:50052 yaze.test.ImGuiTestHarness/Ping</div>
<div class="line"># Response: {&quot;message&quot;:&quot;Pong: test&quot;,&quot;timestampMs&quot;:&quot;...&quot;,&quot;yazeVersion&quot;:&quot;0.3.2&quot;}</div>
</div><!-- fragment --><p><b>Issues Fixed</b>:</p><ul>
<li>❌→✅ SIGSEGV on TestManager initialization (deferred ImGuiTestEngine init to Phase 3)</li>
<li>❌→✅ ImGuiTestEngine API mismatch (switched to dynamic test registration)</li>
<li>❌→✅ Status field access (corrected to <code>test-&gt;Output.Status</code>)</li>
<li>❌→✅ Port conflicts (use port 50052, <code>killall yaze</code> to cleanup)</li>
<li>❌→✅ Flag naming (documented correct underscore format)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1720"></a>
Phase 3: Full ImGuiTestEngine Integration ✅ COMPLETE (Oct 2, 2025)</h3>
<p><b>Goal</b>: Complete implementation of all GUI automation RPCs</p>
<p><b>Completed Tasks</b>:</p><ol type="1">
<li>✅ <b>Type RPC Implementation</b> - Full text input automation<ul>
<li>ItemInfo API usage corrected (returns by value, not pointer)</li>
<li>Focus management with ItemClick before typing</li>
<li>Clear-first functionality with keyboard shortcuts</li>
<li>Dynamic test registration with timeout handling</li>
</ul>
</li>
<li>✅ <b>Wait RPC Implementation</b> - Condition polling with timeout<ul>
<li>Three condition types: window_visible, element_visible, element_enabled</li>
<li>Configurable timeout (default 5000ms) and poll interval (default 100ms)</li>
<li>Proper Yield() calls to allow <a class="el" href="../../df/de4/namespaceImGui.html">ImGui</a> event processing</li>
<li>Extended timeout for test execution</li>
</ul>
</li>
<li>✅ <b>Assert RPC Implementation</b> - State validation with structured responses<ul>
<li>Multiple assertion types: visible, enabled, exists, text_contains</li>
<li>Actual vs expected value reporting</li>
<li>Detailed error messages for debugging</li>
<li>text_contains partially implemented (text retrieval needs refinement)</li>
</ul>
</li>
<li>✅ <b>API Compatibility Fixes</b><ul>
<li>Corrected ItemInfo usage (by value, check ID != 0)</li>
<li>Fixed flag names (ItemFlags instead of StatusFlags)</li>
<li>Proper visibility checks using RectClipped dimensions</li>
<li>All dynamic tests properly registered and cleaned up</li>
</ul>
</li>
</ol>
<p><b>Testing</b>:</p><ul>
<li>Build successful on macOS ARM64</li>
<li>All RPCs respond correctly</li>
<li>Test script created: <code>scripts/test_harness_e2e.sh</code></li>
<li>See <code><a class="el" href="../../db/ded/IT-01-PHASE3-COMPLETE_8md.html">IT-01-PHASE3-COMPLETE.md</a></code> for full implementation details</li>
</ul>
<p><b>Known Limitations</b>:</p><ul>
<li>Screenshot RPC not implemented (placeholder stub)</li>
<li>text_contains assertion uses placeholder text retrieval</li>
<li>Need end-to-end workflow testing with real YAZE widgets</li>
</ul>
<ol type="1">
<li><b>End-to-End Testing</b> (1 hour)<ul>
<li>Create shell script workflow: start server → click button → wait for window → type text → assert state</li>
<li>Test with real YAZE editors (Overworld, Dungeon, etc.)</li>
<li>Document edge cases and troubleshooting</li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md1721"></a>
Phase 4: CLI Integration &amp; Windows Testing (4-5 hours)</h3>
<ol type="1">
<li><b>CLI Client</b> (<code>z3ed agent test</code>)<ul>
<li>Generate gRPC calls from AI prompts</li>
<li>Natural language → <a class="el" href="../../df/de4/namespaceImGui.html">ImGui</a> action translation</li>
<li>Screenshot capture for LLM feedback</li>
</ul>
</li>
<li><b>Windows Testing</b><ul>
<li>Detailed build instructions for vcpkg setup</li>
<li>Test on Windows VM or with contributor</li>
<li>Add Windows CI job to GitHub Actions</li>
<li>Document troubleshooting</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1722"></a>
IT-01 Quick Reference</h2>
<p><b>Start YAZE with Test Harness</b>: </p><div class="fragment"><div class="line">./build-grpc-test/bin/yaze.app/Contents/MacOS/yaze \</div>
<div class="line">  --enable_test_harness \</div>
<div class="line">  --test_harness_port=50052 \</div>
<div class="line">  --rom_file=assets/zelda3.sfc &amp;</div>
</div><!-- fragment --><p><b>Test RPCs with grpcurl</b>: </p><div class="fragment"><div class="line"># Ping - Health check</div>
<div class="line">grpcurl -plaintext -import-path src/app/core/proto -proto imgui_test_harness.proto \</div>
<div class="line">  -d &#39;{&quot;message&quot;:&quot;test&quot;}&#39; 127.0.0.1:50052 yaze.test.ImGuiTestHarness/Ping</div>
<div class="line"> </div>
<div class="line"># Click - Click UI element</div>
<div class="line">grpcurl -plaintext -import-path src/app/core/proto -proto imgui_test_harness.proto \</div>
<div class="line">  -d &#39;{&quot;target&quot;:&quot;button:Overworld&quot;,&quot;type&quot;:&quot;LEFT&quot;}&#39; \</div>
<div class="line">  127.0.0.1:50052 yaze.test.ImGuiTestHarness/Click</div>
<div class="line"> </div>
<div class="line"># Type - Input text</div>
<div class="line">grpcurl -plaintext -import-path src/app/core/proto -proto imgui_test_harness.proto \</div>
<div class="line">  -d &#39;{&quot;target&quot;:&quot;input:Filename&quot;,&quot;text&quot;:&quot;zelda3.sfc&quot;,&quot;clear_first&quot;:true}&#39; \</div>
<div class="line">  127.0.0.1:50052 yaze.test.ImGuiTestHarness/Type</div>
<div class="line"> </div>
<div class="line"># Wait - Wait for condition</div>
<div class="line">grpcurl -plaintext -import-path src/app/core/proto -proto imgui_test_harness.proto \</div>
<div class="line">  -d &#39;{&quot;condition&quot;:&quot;window_visible:Overworld Editor&quot;,&quot;timeout_ms&quot;:5000}&#39; \</div>
<div class="line">  127.0.0.1:50052 yaze.test.ImGuiTestHarness/Wait</div>
<div class="line"> </div>
<div class="line"># Assert - Validate state</div>
<div class="line">grpcurl -plaintext -import-path src/app/core/proto -proto imgui_test_harness.proto \</div>
<div class="line">  -d &#39;{&quot;condition&quot;:&quot;visible:Main Window&quot;}&#39; \</div>
<div class="line">  127.0.0.1:50052 yaze.test.ImGuiTestHarness/Assert</div>
</div><!-- fragment --><p><b>Troubleshooting</b>:</p><ul>
<li><b>Port in use</b>: <code>killall yaze</code> or use <code>--test_harness_port=50053</code></li>
<li><b>Connection refused</b>: Check server started with <code>lsof -i :50052</code></li>
<li><b>Unrecognized flag</b>: Use underscores not hyphens (e.g., <code>--rom_file</code> not <code>--rom</code>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1723"></a>
Priority 2: Policy Evaluation Framework (AW-04, 4-6 hours)</h2>
<ol type="1">
<li><b>DESIGN</b>: YAML-based Policy Configuration <div class="fragment"><div class="line"># .yaze/policies/agent.yaml</div>
<div class="line">version: 1.0</div>
<div class="line">policies:</div>
<div class="line">  - name: require_tests</div>
<div class="line">    type: test_requirement</div>
<div class="line">    enabled: true</div>
<div class="line">    rules:</div>
<div class="line">      - test_suite: &quot;overworld_rendering&quot;</div>
<div class="line">        min_pass_rate: 0.95</div>
<div class="line">      - test_suite: &quot;palette_integrity&quot;</div>
<div class="line">        min_pass_rate: 1.0</div>
<div class="line">  </div>
<div class="line">  - name: limit_change_scope</div>
<div class="line">    type: change_constraint</div>
<div class="line">    enabled: true</div>
<div class="line">    rules:</div>
<div class="line">      - max_bytes_changed: 10240  # 10KB</div>
<div class="line">      - allowed_banks: [0x00, 0x01, 0x0E]  # Graphics banks only</div>
<div class="line">      - forbidden_ranges:</div>
<div class="line">        - start: 0xFFB0  # ROM header</div>
<div class="line">          end: 0xFFFF</div>
<div class="line">  </div>
<div class="line">  - name: human_review_required</div>
<div class="line">    type: review_requirement</div>
<div class="line">    enabled: true</div>
<div class="line">    rules:</div>
<div class="line">      - if: bytes_changed &gt; 1024</div>
<div class="line">        then: require_diff_review: true</div>
<div class="line">      - if: commands_executed &gt; 10</div>
<div class="line">        then: require_log_review: true</div>
</div><!-- fragment --></li>
<li><b>IMPLEMENT</b>: PolicyEvaluator Service<ul>
<li><code>src/cli/service/policy_evaluator.{h,cc}</code></li>
<li>Singleton service loads policies from <code>.yaze/policies/</code></li>
<li><code>EvaluateProposal(proposal_id) -&gt; PolicyResult</code></li>
<li>Returns: pass/fail + list of violations with severity</li>
<li>Hook into ProposalRegistry lifecycle</li>
</ul>
</li>
<li><b>INTEGRATE</b>: Policy UI in ProposalDrawer<ul>
<li>Add "Policy Status" section in detail view</li>
<li>Display violations with icons: ⛔ Critical, ⚠️ Warning, ℹ️ Info</li>
<li>Gate Accept button: disabled if critical violations exist</li>
<li>Show helpful messages: "Accept blocked: Test pass rate 0.85 &lt; 0.95"</li>
<li>Allow policy overrides with confirmation: "Override policy? This action will be logged."</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1724"></a>
Priority 3: Documentation &amp; Consolidation (2-3 hours)</h2>
<ol type="1">
<li><b>CONSOLIDATE</b>: Merge standalone docs into main plan<ul>
<li>✅ AW-03 summary → already in main plan, delete standalone doc</li>
<li>Check for other AW-* or task-specific docs to merge</li>
<li>Update main plan with architecture diagrams</li>
</ul>
</li>
<li><b>CREATE</b>: Architecture Flow Diagram<ul>
<li>Visual representation of proposal lifecycle</li>
<li>Component interaction diagram</li>
<li>Add to implementation plan</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1725"></a>
Later: Advanced Features</h2>
<ul>
<li>VP-01: Expand CLI unit tests</li>
<li>VP-02: Integration tests with replay scripts</li>
<li>TL-01: Telemetry capture for learning</li>
</ul>
<h1><a class="anchor" id="autotoc_md1726"></a>
4. Current Issues &amp; Blockers</h1>
<h2><a class="anchor" id="autotoc_md1727"></a>
Active Issues</h2>
<p>None - all blocking issues resolved as of Oct 1, 2025</p>
<h2><a class="anchor" id="autotoc_md1728"></a>
Known Limitations (Non-Blocking)</h2>
<ol type="1">
<li>ProposalDrawer lacks keyboard navigation</li>
<li>Large diffs/logs truncated at 1000 lines (consider pagination)</li>
<li>Proposals don't persist full metadata to disk (prompt, description, sandbox_id reconstructed)</li>
<li>No policy evaluation yet (AW-04)</li>
</ol>
<h1><a class="anchor" id="autotoc_md1729"></a>
5. Architecture Overview</h1>
<h2><a class="anchor" id="autotoc_md1730"></a>
5.1. Proposal Lifecycle Flow</h2>
<div class="fragment"><div class="line">┌─────────────────────────────────────────────────────────────────┐</div>
<div class="line">│ 1. CREATION (CLI: z3ed agent run)                               │</div>
<div class="line">├─────────────────────────────────────────────────────────────────┤</div>
<div class="line">│ User Prompt                                                      │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ MockAIService / GeminiAIService                                 │</div>
<div class="line">│      ↓ (generates commands)                                     │</div>
<div class="line">│ [&quot;palette export ...&quot;, &quot;overworld set-tile ...&quot;]                │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ RomSandboxManager::CreateSandbox(rom)                           │</div>
<div class="line">│      ↓ (creates isolated copy)                                  │</div>
<div class="line">│ /tmp/yaze/sandboxes/&lt;timestamp&gt;/zelda3.sfc                      │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ Execute commands on sandbox ROM                                 │</div>
<div class="line">│      ↓ (logs each command)                                      │</div>
<div class="line">│ ProposalRegistry::CreateProposal(sandbox_id, prompt, desc)      │</div>
<div class="line">│      ↓ (creates proposal directory)                             │</div>
<div class="line">│ /tmp/yaze/proposals/proposal-&lt;timestamp&gt;-&lt;seq&gt;/                 │</div>
<div class="line">│   ├─ execution.log (command outputs)                            │</div>
<div class="line">│   ├─ diff.txt (if generated)                                    │</div>
<div class="line">│   └─ screenshots/ (if any)                                      │</div>
<div class="line">└─────────────────────────────────────────────────────────────────┘</div>
<div class="line"> </div>
<div class="line">┌─────────────────────────────────────────────────────────────────┐</div>
<div class="line">│ 2. DISCOVERY (CLI: z3ed agent list)                             │</div>
<div class="line">├─────────────────────────────────────────────────────────────────┤</div>
<div class="line">│ ProposalRegistry::ListProposals()                               │</div>
<div class="line">│      ↓ (lazy loads from disk)                                   │</div>
<div class="line">│ LoadProposalsFromDiskLocked()                                   │</div>
<div class="line">│      ↓ (scans /tmp/yaze/proposals/)                             │</div>
<div class="line">│ Reconstructs metadata from filesystem                           │</div>
<div class="line">│      ↓ (parses timestamps, reads logs)                          │</div>
<div class="line">│ Returns vector&lt;ProposalMetadata&gt;                                │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ Display table: ID | Status | Created | Prompt | Stats           │</div>
<div class="line">└─────────────────────────────────────────────────────────────────┘</div>
<div class="line"> </div>
<div class="line">┌─────────────────────────────────────────────────────────────────┐</div>
<div class="line">│ 3. REVIEW (GUI: Debug → Agent Proposals)                        │</div>
<div class="line">├─────────────────────────────────────────────────────────────────┤</div>
<div class="line">│ ProposalDrawer::Draw()                                          │</div>
<div class="line">│      ↓ (called every frame from EditorManager)                  │</div>
<div class="line">│ ProposalDrawer::RefreshProposals()                              │</div>
<div class="line">│      ↓ (calls ProposalRegistry::ListProposals)                  │</div>
<div class="line">│ Display proposal list (selectable table)                        │</div>
<div class="line">│      ↓ (user clicks proposal)                                   │</div>
<div class="line">│ ProposalDrawer::SelectProposal(id)                              │</div>
<div class="line">│      ↓ (loads detail content)                                   │</div>
<div class="line">│ Read execution.log and diff.txt from proposal directory         │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ Display detail view:                                            │</div>
<div class="line">│   ├─ Metadata (sandbox_id, timestamp, stats)                   │</div>
<div class="line">│   ├─ Diff (syntax highlighted)                                  │</div>
<div class="line">│   └─ Log (command execution trace)                              │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ User decides: [Accept] [Reject] [Delete]                        │</div>
<div class="line">└─────────────────────────────────────────────────────────────────┘</div>
<div class="line"> </div>
<div class="line">┌─────────────────────────────────────────────────────────────────┐</div>
<div class="line">│ 4. ACCEPTANCE (GUI: Click &quot;Accept&quot; button)                      │</div>
<div class="line">├─────────────────────────────────────────────────────────────────┤</div>
<div class="line">│ ProposalDrawer::AcceptProposal(proposal_id)                     │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ Get proposal metadata (includes sandbox_id)                     │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ RomSandboxManager::ListSandboxes()                              │</div>
<div class="line">│      ↓ (find sandbox by ID)                                     │</div>
<div class="line">│ sandbox_rom_path = sandbox.rom_path                             │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ Load sandbox ROM from disk                                      │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ rom_-&gt;WriteVector(0, sandbox_rom.vector())                      │</div>
<div class="line">│      ↓ (copies entire sandbox ROM → main ROM)                   │</div>
<div class="line">│ ROM marked dirty (save prompt appears)                          │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ ProposalRegistry::UpdateStatus(id, kAccepted)                   │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ User: File → Save ROM                                           │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ Changes committed ✅                                            │</div>
<div class="line">└─────────────────────────────────────────────────────────────────┘</div>
<div class="line"> </div>
<div class="line">┌─────────────────────────────────────────────────────────────────┐</div>
<div class="line">│ 5. REJECTION (GUI: Click &quot;Reject&quot; button)                       │</div>
<div class="line">├─────────────────────────────────────────────────────────────────┤</div>
<div class="line">│ ProposalDrawer::RejectProposal(proposal_id)                     │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ ProposalRegistry::UpdateStatus(id, kRejected)                   │</div>
<div class="line">│      ↓                                                           │</div>
<div class="line">│ Proposal preserved for audit trail                              │</div>
<div class="line">│ Sandbox ROM left untouched (can be cleaned up later)            │</div>
<div class="line">└─────────────────────────────────────────────────────────────────┘</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1731"></a>
5.2. Component Interaction Diagram</h2>
<div class="fragment"><div class="line">┌────────────────────┐</div>
<div class="line">│   CLI Layer        │</div>
<div class="line">│  (z3ed commands)   │</div>
<div class="line">└────────┬───────────┘</div>
<div class="line">         │</div>
<div class="line">         ├──► agent run ──────────┐</div>
<div class="line">         ├──► agent list ─────────┤</div>
<div class="line">         └──► agent diff ─────────┤</div>
<div class="line">                                  │</div>
<div class="line">         ┌────────────────────────▼──────────────────────┐</div>
<div class="line">         │         CLI Service Layer                     │</div>
<div class="line">         ├───────────────────────────────────────────────┤</div>
<div class="line">         │  ┌─────────────────────────────────────────┐  │</div>
<div class="line">         │  │ ProposalRegistry (Singleton)            │  │</div>
<div class="line">         │  │  • CreateProposal()                     │  │</div>
<div class="line">         │  │  • ListProposals()                      │  │</div>
<div class="line">         │  │  • GetProposal()                        │  │</div>
<div class="line">         │  │  • UpdateStatus()                       │  │</div>
<div class="line">         │  │  • RemoveProposal()                     │  │</div>
<div class="line">         │  │  • LoadProposalsFromDiskLocked()        │  │</div>
<div class="line">         │  └────────────┬────────────────────────────┘  │</div>
<div class="line">         │               │                               │</div>
<div class="line">         │  ┌────────────▼────────────────────────────┐  │</div>
<div class="line">         │  │ RomSandboxManager (Singleton)          │  │</div>
<div class="line">         │  │  • CreateSandbox()                     │  │</div>
<div class="line">         │  │  • ActiveSandbox()                     │  │</div>
<div class="line">         │  │  • ListSandboxes()                     │  │</div>
<div class="line">         │  │  • RemoveSandbox()                     │  │</div>
<div class="line">         │  └────────────┬────────────────────────────┘  │</div>
<div class="line">         └───────────────┼────────────────────────────────┘</div>
<div class="line">                         │</div>
<div class="line">         ┌───────────────▼────────────────────────────────┐</div>
<div class="line">         │         Filesystem Layer                       │</div>
<div class="line">         ├────────────────────────────────────────────────┤</div>
<div class="line">         │  /tmp/yaze/proposals/                          │</div>
<div class="line">         │    └─ proposal-&lt;timestamp&gt;-&lt;seq&gt;/              │</div>
<div class="line">         │         ├─ execution.log                       │</div>
<div class="line">         │         ├─ diff.txt                            │</div>
<div class="line">         │         └─ screenshots/                        │</div>
<div class="line">         │                                                │</div>
<div class="line">         │  /tmp/yaze/sandboxes/                          │</div>
<div class="line">         │    └─ &lt;timestamp&gt;-&lt;seq&gt;/                       │</div>
<div class="line">         │         └─ zelda3.sfc (isolated ROM copy)      │</div>
<div class="line">         └────────────────────────────────────────────────┘</div>
<div class="line">                         ▲</div>
<div class="line">                         │</div>
<div class="line">         ┌───────────────┴────────────────────────────────┐</div>
<div class="line">         │         GUI Layer                              │</div>
<div class="line">         ├────────────────────────────────────────────────┤</div>
<div class="line">         │  ┌─────────────────────────────────────────┐   │</div>
<div class="line">         │  │ EditorManager                           │   │</div>
<div class="line">         │  │  • current_rom_                         │   │</div>
<div class="line">         │  │  • proposal_drawer_                     │   │</div>
<div class="line">         │  │  • Update() { proposal_drawer_.Draw() } │   │</div>
<div class="line">         │  └────────────┬────────────────────────────┘   │</div>
<div class="line">         │               │                                │</div>
<div class="line">         │  ┌────────────▼────────────────────────────┐   │</div>
<div class="line">         │  │ ProposalDrawer                          │   │</div>
<div class="line">         │  │  • rom_ (ptr to EditorManager&#39;s ROM)    │   │</div>
<div class="line">         │  │  • Draw()                               │   │</div>
<div class="line">         │  │  • DrawProposalList()                   │   │</div>
<div class="line">         │  │  • DrawProposalDetail()                 │   │</div>
<div class="line">         │  │  • AcceptProposal() ← ROM MERGE         │   │</div>
<div class="line">         │  │  • RejectProposal()                     │   │</div>
<div class="line">         │  │  • DeleteProposal()                     │   │</div>
<div class="line">         │  └─────────────────────────────────────────┘   │</div>
<div class="line">         └────────────────────────────────────────────────┘</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1732"></a>
5.3. Data Flow: Agent Run to ROM Merge</h2>
<div class="fragment"><div class="line">User: &quot;Make soldiers wear red armor&quot;</div>
<div class="line">         │</div>
<div class="line">         ▼</div>
<div class="line">┌────────────────────────┐</div>
<div class="line">│ MockAIService          │ Generates: [&quot;palette export sprites_aux1 4 soldier.col&quot;]</div>
<div class="line">└────────┬───────────────┘</div>
<div class="line">         │</div>
<div class="line">         ▼</div>
<div class="line">┌────────────────────────┐</div>
<div class="line">│ RomSandboxManager      │ Creates: /tmp/.../sandboxes/20251001T200215-1/zelda3.sfc</div>
<div class="line">└────────┬───────────────┘</div>
<div class="line">         │</div>
<div class="line">         ▼</div>
<div class="line">┌────────────────────────┐</div>
<div class="line">│ Command Executor       │ Runs: palette export on sandbox ROM</div>
<div class="line">└────────┬───────────────┘</div>
<div class="line">         │</div>
<div class="line">         ▼</div>
<div class="line">┌────────────────────────┐</div>
<div class="line">│ ProposalRegistry       │ Creates: proposal-20251001T200215-1/</div>
<div class="line">│                        │   • execution.log: &quot;[timestamp] palette export succeeded&quot;</div>
<div class="line">└────────┬───────────────┘   • diff.txt: (if diff generated)</div>
<div class="line">         │</div>
<div class="line">         │ Time passes... user launches GUI</div>
<div class="line">         ▼</div>
<div class="line">┌────────────────────────┐</div>
<div class="line">│ ProposalDrawer loads   │ Reads: /tmp/.../proposals/proposal-*/</div>
<div class="line">│                        │ Displays: List of proposals</div>
<div class="line">└────────┬───────────────┘</div>
<div class="line">         │</div>
<div class="line">         │ User clicks &quot;Accept&quot;</div>
<div class="line">         ▼</div>
<div class="line">┌────────────────────────┐</div>
<div class="line">│ AcceptProposal()       │ 1. Find sandbox ROM: /tmp/.../sandboxes/.../zelda3.sfc</div>
<div class="line">│                        │ 2. Load sandbox ROM</div>
<div class="line">│                        │ 3. rom_-&gt;WriteVector(0, sandbox_rom.vector())</div>
<div class="line">│                        │ 4. Main ROM now contains all sandbox changes</div>
<div class="line">│                        │ 5. ROM marked dirty</div>
<div class="line">└────────┬───────────────┘</div>
<div class="line">         │</div>
<div class="line">         ▼</div>
<div class="line">┌────────────────────────┐</div>
<div class="line">│ User: File → Save      │ Changes persisted to disk ✅</div>
<div class="line">└────────────────────────┘</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1733"></a>
5. Open Questions</h1>
<ul>
<li>What serialization format should the proposal registry adopt for diff payloads (binary vs. textual vs. hybrid)? \ ➤ Decision: pursue a hybrid package (<code>.z3ed-diff</code>) that wraps binary tile/object deltas alongside a JSON metadata envelope (identifiers, texture descriptors, preview palette info). Capture format draft under RC/AW backlog.</li>
<li>How should the harness authenticate escalation requests for mutation actions? \ ➤ Still open—evaluate shared-secret vs. interactive user prompt in the harness spike (IT-01).</li>
<li>Can we reuse existing regression test infrastructure for nightly <a class="el" href="../../df/de4/namespaceImGui.html">ImGui</a> runs or should we spin up a dedicated binary? \ ➤ Investigate during the ImGuiTestHarness spike; compare extending <code>yaze_test</code> jobs versus introducing a lightweight automation runner.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1734"></a>
5. Completed Work Summary</h1>
<h2><a class="anchor" id="autotoc_md1735"></a>
Resource Catalogue Workstream (RC) - ✅ COMPLETE</h2>
<p>The Resource Catalogue workstream has been successfully completed, providing a foundation for AI-driven automation:</p>
<p><b>Implementation Details</b>:</p><ul>
<li>Created comprehensive schema system in <code>src/cli/service/resource_catalog.{h,cc}</code></li>
<li>Implemented resource catalog for: ROM, Patch, Palette, Overworld, Dungeon, and Agent commands</li>
<li>Each resource includes: name, description, actions, arguments, effects, and return values</li>
<li>Built dual-format serialization: JSON (compact) and YAML (human-readable)</li>
</ul>
<p><b>Key Fixes</b>:</p><ul>
<li>Fixed <code>rom info</code> segfault by creating dedicated <code>RomInfo</code> handler using <code>FLAGS_rom</code></li>
<li>Added <code>rom info</code> action to resource schema with proper metadata</li>
<li>Ensured all ROM commands consistently use flag-based dispatch</li>
</ul>
<p><b>Generated Artifacts</b>:</p><ul>
<li><code>docs/api/z3ed-resources.yaml</code> - Authoritative machine-readable API reference</li>
<li>Both JSON and YAML output formats validated and working</li>
<li>Resource filtering capability (<code>--resource &lt;name&gt;</code>) operational</li>
</ul>
<p><b>Command Examples</b>: </p><div class="fragment"><div class="line"># View all resources in YAML</div>
<div class="line">z3ed agent describe --format yaml</div>
<div class="line"> </div>
<div class="line"># Get specific resource as JSON</div>
<div class="line">z3ed agent describe --format json --resource rom</div>
<div class="line"> </div>
<div class="line"># Generate documentation file</div>
<div class="line">z3ed agent describe --format yaml --output docs/api/z3ed-resources.yaml</div>
</div><!-- fragment --><p><b>Testing Results</b>: All commands tested and verified working:</p><ul>
<li>✅ <code>z3ed rom info --rom=zelda3.sfc</code> - displays title, size, filename</li>
<li>✅ <code>z3ed rom validate --rom=zelda3.sfc</code> - verifies checksum and header</li>
<li>✅ <code>z3ed agent describe --format yaml</code> - outputs complete catalog</li>
<li>✅ <code>z3ed agent describe --format json --resource rom</code> - filters by resource</li>
</ul>
<h2><a class="anchor" id="autotoc_md1736"></a>
Acceptance Workflow (AW-01, AW-02) - ✅ CORE COMPLETE</h2>
<p>The foundational infrastructure for proposal tracking and review is now operational:</p>
<p><b>RomSandboxManager Implementation</b> (AW-01):</p><ul>
<li>Singleton service managing isolated ROM copies for agent proposals</li>
<li>Sandboxes created in <code>YAZE_SANDBOX_ROOT</code> (env var) or system temp directory</li>
<li>Automatic directory creation and ROM file cloning</li>
<li>Active sandbox tracking for current agent session</li>
<li>Cleanup utilities for removing old sandboxes</li>
</ul>
<p><b>ProposalRegistry Implementation</b> (AW-02):</p><ul>
<li>Comprehensive tracking of agent-generated ROM modifications</li>
<li>Stores proposal metadata: ID, sandbox ID, prompt, description, timestamps</li>
<li>Records execution diffs in <code>diff.txt</code> within proposal directory</li>
<li>Appends command execution logs to <code>execution.log</code> with timestamps</li>
<li>Support for screenshot attachments (path tracking)</li>
<li>Proposal lifecycle: Pending → Accepted/Rejected</li>
<li>Query capabilities: get by ID, list all, filter by status, find latest pending</li>
</ul>
<p><b>Agent Run Integration</b>:</p><ul>
<li><code>agent run</code> now creates sandbox + proposal automatically</li>
<li>All command executions logged with timestamps and status</li>
<li>Success/failure outcomes captured in proposal logs</li>
<li>User feedback includes proposal ID and sandbox path for review</li>
<li>Foundation ready for <code>agent diff</code>, <code>agent commit</code>, <code>agent revert</code> enhancements</li>
</ul>
<p><b>Agent Diff Enhancement</b> (Completed Oct 1, 2025):</p><ul>
<li>Reads proposal diffs from ProposalRegistry automatically</li>
<li>Displays detailed metadata: proposal ID, status, timestamps, command count</li>
<li>Shows diff content from proposal directory</li>
<li>Displays execution log (first 50 lines, with truncation for long logs)</li>
<li>Provides next-step guidance (commit/revert/GUI review)</li>
<li>Supports <code>--proposal-id</code> flag to view specific proposals</li>
<li>Fallback to legacy diff behavior if no proposals found</li>
</ul>
<p><b>Agent List Command</b> (New - Oct 1, 2025):</p><ul>
<li>Enumerates all proposals in the registry</li>
<li>Shows proposal ID, status, creation time, prompt, and stats</li>
<li>Indicates pending/accepted/rejected status for each proposal</li>
<li>Provides guidance on using <code>agent diff</code> to view details</li>
<li>Empty state message guides users to create proposals with <code>agent run</code></li>
</ul>
<p><b>Resource Catalog Updates</b>:</p><ul>
<li>Added <code>agent list</code> action with returns schema</li>
<li>Added <code>agent diff</code> action with arguments (<code>--proposal-id</code>) and returns schema</li>
<li>Updated agent resource description to include listing and diffing capabilities</li>
<li>Regenerated <code>docs/api/z3ed-resources.yaml</code> with new agent actions</li>
</ul>
<p><b>ProposalDrawer GUI Component</b> (Completed Oct 1, 2025):</p><ul>
<li><a class="el" href="../../df/de4/namespaceImGui.html">ImGui</a> right-side drawer for proposal review (AW-03)</li>
<li>Split view: proposal list (top) + detail view (bottom)</li>
<li>List view: table with ID, status, prompt columns; colored status indicators</li>
<li>Detail view: collapsible sections for metadata/diff/log; syntax-aware display</li>
<li>Action buttons: Accept, Reject, Delete with confirmation dialogs</li>
<li>Status filtering (All/Pending/Accepted/Rejected)</li>
<li>Integrated into EditorManager with Debug → Agent Proposals menu</li>
<li>Accept/Reject updates ProposalRegistry status</li>
<li>Delete removes proposal from registry and filesystem</li>
<li>TODO: Implement actual ROM merging in AcceptProposal method</li>
</ul>
<p><b>Proposal Persistence Fix</b> (Completed Oct 1, 2025):</p><ul>
<li>Fixed ProposalRegistry to load proposals from disk on first access</li>
<li>Added <code>LoadProposalsFromDiskLocked()</code> method scanning proposal root directory</li>
<li>Lazy loading implementation in <code>ListProposals()</code> for automatic registry population</li>
<li>Reconstructs metadata from filesystem: ID, timestamps, log/diff paths, screenshots</li>
<li>Parses creation time from proposal ID format (<code>proposal-20251001T200215-1</code>)</li>
<li>Enables cross-session proposal tracking - <code>agent list</code> now finds all proposals</li>
<li>ProposalDrawer can now display proposals created via CLI <code>agent run</code></li>
</ul>
<p><b>CMake Build Integration</b>:</p><ul>
<li>Added <code><a class="el" href="../../db/d01/proposal__registry_8cc.html">cli/service/proposal_registry.cc</a></code> and <code><a class="el" href="../../dc/d3a/rom__sandbox__manager_8cc.html">cli/service/rom_sandbox_manager.cc</a></code> to all app targets</li>
<li>Fixed linker errors by including CLI service sources in:<ul>
<li><code>yaze</code> (main GUI app)</li>
<li><code>yaze_emu</code> (emulator standalone)</li>
<li><code>yaze_core</code> (testing library)</li>
<li><code>yaze_c</code> (C API library)</li>
</ul>
</li>
<li>All targets now build successfully with ProposalDrawer dependencies</li>
</ul>
<p><b>Architecture Benefits</b>:</p><ul>
<li>Clean separation: RomSandboxManager (file ops) ↔ ProposalRegistry (metadata)</li>
<li>Thread-safe with mutex protection for concurrent access</li>
<li>Extensible design ready for <a class="el" href="../../df/de4/namespaceImGui.html">ImGui</a> review UI (AW-03)</li>
<li>Proposal persistence enables post-session review and auditing</li>
<li>Proposal-centric workflow enables human-in-the-loop review</li>
<li>GUI and CLI both have full access to proposal system</li>
</ul>
<p><b>Next Steps for AW Workstream</b>:</p><ul>
<li>Test ProposalDrawer in running application</li>
<li>Complete ROM merging in AcceptProposal method</li>
<li>AW-04: Policy evaluation for gating mutations</li>
<li>AW-05: <code>.z3ed-diff</code> hybrid format design</li>
</ul>
<h2><a class="anchor" id="autotoc_md1737"></a>
Files Modified/Created</h2>
<p><b>Phase 6 (Resource Catalogue)</b>:</p><ol type="1">
<li><code><a class="el" href="../../d4/d1a/cli_2handlers_2rom_8cc.html">src/cli/handlers/rom.cc</a></code> - Added <code>RomInfo::Run</code> implementation</li>
<li><code><a class="el" href="../../d3/dfa/z3ed_8h.html">src/cli/z3ed.h</a></code> - Added <code>RomInfo</code> class declaration <br  />
</li>
<li><code><a class="el" href="../../dc/d8b/modern__cli_8cc.html">src/cli/modern_cli.cc</a></code> - Updated <code>HandleRomInfoCommand</code> routing</li>
<li><code><a class="el" href="../../d6/d24/resource__catalog_8cc.html">src/cli/service/resource_catalog.cc</a></code> - Added <code>rom info</code> schema entry</li>
<li><code>docs/api/z3ed-resources.yaml</code> - Generated comprehensive API catalog</li>
</ol>
<p><b>AW-01 &amp; AW-02 (Proposal Tracking)</b>:</p><ol type="1">
<li><code><a class="el" href="../../d4/d3d/proposal__registry_8h.html">src/cli/service/proposal_registry.h</a></code> - New proposal tracking service interface</li>
<li><code><a class="el" href="../../db/d01/proposal__registry_8cc.html">src/cli/service/proposal_registry.cc</a></code> - Implementation with full lifecycle management</li>
<li><code><a class="el" href="../../d2/d0e/agent_8cc.html">src/cli/handlers/agent.cc</a></code> - Integrated ProposalRegistry into agent run workflow</li>
</ol>
<p><b>Agent Diff &amp; List Enhancement</b>:</p><ol type="1">
<li><code><a class="el" href="../../d2/d0e/agent_8cc.html">src/cli/handlers/agent.cc</a></code> - Enhanced HandleDiffCommand with proposal reading, added HandleListCommand</li>
<li><code><a class="el" href="../../d6/d24/resource__catalog_8cc.html">src/cli/service/resource_catalog.cc</a></code> - Added agent list/diff actions with schemas</li>
<li><code>docs/api/z3ed-resources.yaml</code> - Regenerated with new agent commands</li>
<li><code>docs/E6-z3ed-cli-design.md</code> - Updated Section 8.1 with list/diff documentation</li>
</ol>
<p><b>AW-03 (ProposalDrawer GUI)</b>:</p><ol type="1">
<li><code><a class="el" href="../../d5/dca/proposal__drawer_8h.html">src/app/editor/system/proposal_drawer.h</a></code> - Complete drawer interface with Draw/Accept/Reject/Delete</li>
<li><code><a class="el" href="../../d1/d96/proposal__drawer_8cc.html">src/app/editor/system/proposal_drawer.cc</a></code> - Full implementation (~350 lines) with list/detail views</li>
<li><code><a class="el" href="../../df/d60/editor__manager_8h.html">src/app/editor/editor_manager.h</a></code> - Added ProposalDrawer member and include</li>
<li><code><a class="el" href="../../d0/dd9/editor__manager_8cc.html">src/app/editor/editor_manager.cc</a></code> - Added menu item and Draw() call in Update loop</li>
<li><code>src/CMakeLists.txt</code> - Added proposal_drawer files to System Editor source group</li>
<li><code>src/app/app.cmake</code> - Added CLI service sources to yaze target (both Apple and non-Apple builds)</li>
<li><code>src/app/emu/emu.cmake</code> - Added CLI service sources to yaze_emu target</li>
<li><code>src/CMakeLists.txt</code> - Added CLI service sources to yaze_core library sources</li>
</ol>
<ol type="1">
<li><code>src/cli/z3ed.cmake</code> - Added <a class="el" href="../../db/d01/proposal__registry_8cc.html">proposal_registry.cc</a> to build</li>
<li><code>docs/E6-z3ed-implementation-plan.md</code> - Updated progress and task statuses</li>
</ol>
<p><b>Agent Diff &amp; List (Oct 1, 2025)</b>:</p><ol type="1">
<li><code><a class="el" href="../../d2/d0e/agent_8cc.html">src/cli/handlers/agent.cc</a></code> - Enhanced <code>HandleDiffCommand</code> with proposal reading, added <code>HandleListCommand</code></li>
<li><code><a class="el" href="../../d6/d24/resource__catalog_8cc.html">src/cli/service/resource_catalog.cc</a></code> - Added agent list and diff actions to schema</li>
<li><code>docs/api/z3ed-resources.yaml</code> - Regenerated with new agent commands</li>
</ol>
<p><b>Proposal Persistence Fix (Oct 1, 2025)</b>:</p><ol type="1">
<li><code><a class="el" href="../../d4/d3d/proposal__registry_8h.html">src/cli/service/proposal_registry.h</a></code> - Added <code>LoadProposalsFromDiskLocked()</code> declaration</li>
<li><code><a class="el" href="../../db/d01/proposal__registry_8cc.html">src/cli/service/proposal_registry.cc</a></code> - Implemented disk loading with timestamp parsing and metadata reconstruction</li>
<li><code><a class="el" href="../../db/d01/proposal__registry_8cc.html">src/cli/service/proposal_registry.cc</a></code> - Modified <code>ListProposals()</code> to lazy-load proposals from disk</li>
</ol>
<p><b>ROM Merging Implementation (Oct 1, 2025)</b>:</p><ol type="1">
<li><code><a class="el" href="../../d5/dca/proposal__drawer_8h.html">src/app/editor/system/proposal_drawer.h</a></code> - Added <code>SetRom()</code> method and <code>Rom*</code> member for merge operations</li>
<li><code><a class="el" href="../../d1/d96/proposal__drawer_8cc.html">src/app/editor/system/proposal_drawer.cc</a></code> - Implemented full ROM merging in <code>AcceptProposal()</code> with sandbox loading</li>
<li><code><a class="el" href="../../d0/dd9/editor__manager_8cc.html">src/app/editor/editor_manager.cc</a></code> - Added <code>SetRom(current_rom_)</code> call before drawing ProposalDrawer</li>
<li><code><a class="el" href="../../d1/d96/proposal__drawer_8cc.html">src/app/editor/system/proposal_drawer.cc</a></code> - Added RomSandboxManager include for sandbox path resolution</li>
</ol>
<h1><a class="anchor" id="autotoc_md1738"></a>
6. References</h1>
<p><b>Active Documentation</b>:</p><ul>
<li><code><a class="el" href="../../d3/d33/E6-z3ed-cli-design_8md.html">E6-z3ed-cli-design.md</a></code> - Overall CLI design and architecture</li>
<li><code><a class="el" href="../../d9/df3/NEXT__PRIORITIES__OCT2_8md.html">NEXT_PRIORITIES_OCT2.md</a></code> - Current work priorities with detailed implementation guides</li>
<li><code><a class="el" href="../../d2/d82/IT-01-QUICKSTART_8md.html">IT-01-QUICKSTART.md</a></code> - Test harness quick reference</li>
<li><code>docs/api/z3ed-resources.yaml</code> - Machine-readable API reference (generated)</li>
</ul>
<p><b>Source Code</b>:</p><ul>
<li><code>src/cli/service/</code> - Core services (proposal registry, sandbox manager, resource catalog)</li>
<li><code>src/app/editor/system/proposal_drawer.{h,cc}</code> - GUI review panel</li>
<li><code>src/app/core/imgui_test_harness_service.{h,cc}</code> - gRPC automation server</li>
</ul>
<p><b>Historical Documentation</b> (archived):</p><ul>
<li><code>archive/STATE_SUMMARY_*.md</code> - Historical state snapshots</li>
<li><code>archive/IT-01-PHASE*-COMPLETE.md</code> - Phase completion reports</li>
<li><code>archive/*-grpc-*.md</code> - gRPC design decisions and technical notes</li>
<li><code>archive/PROGRESS_SUMMARY_*.md</code> - Daily progress logs</li>
</ul>
<hr  />
<p><b>Last Updated</b>: October 2, 2025 <br  />
 <b>Contributors</b>: @scawful, GitHub Copilot <br  />
 <b>License</b>: Same as YAZE (see ../../LICENSE) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

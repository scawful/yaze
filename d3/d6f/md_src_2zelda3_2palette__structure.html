<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yaze: SNES Palette Structure for ALTTP</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../yaze.ico"/></td>
  <td id="projectalign">
   <div id="projectname">yaze<span id="projectnumber">&#160;0.3.2</span>
   </div>
   <div id="projectbrief">Link to the Past ROM Editor</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d3/d6f/md_src_2zelda3_2palette__structure.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SNES Palette Structure for ALTTP</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1855"></a> </p>
<h1><a class="anchor" id="autotoc_md1856"></a>
SNES Palette Memory Layout</h1>
<p>The SNES has 256 color palette entries organized as:</p><ul>
<li><b>16 palette rows</b> of <b>16 colors each</b></li>
<li>Each row starts with color index 0, which is <b>transparent</b></li>
<li>Palettes must be aligned to 16-color boundaries</li>
</ul>
<h2><a class="anchor" id="autotoc_md1857"></a>
Example Layout</h2>
<div class="fragment"><div class="line">Row 0: Colors 0-15   (Color 0 = transparent)</div>
<div class="line">Row 1: Colors 16-31  (Color 16 = transparent)</div>
<div class="line">Row 2: Colors 32-47  (Color 32 = transparent)</div>
<div class="line">...</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1858"></a>
ALTTP Palette Groups - Corrected Structure</h1>
<h2><a class="anchor" id="autotoc_md1859"></a>
Background Palettes (BG)</h2>
<h3><a class="anchor" id="autotoc_md1860"></a>
Overworld Main (35 colors per set)</h3>
<ul>
<li><b>Structure</b>: 2 full rows + 3 colors<ul>
<li>Row 0: Colors 0-15 (transparent + 15 colors)</li>
<li>Row 1: Colors 16-31 (transparent + 15 colors)</li>
<li>Row 2: Colors 32-34 (3 colors)</li>
</ul>
</li>
<li><b>ROM</b>: 0xDE6C8</li>
<li><b>Sets</b>: 60 (20 LW, 20 DW, 20 Special)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1861"></a>
Overworld Auxiliary (21 colors per set)</h3>
<ul>
<li><b>Structure</b>: 1 full row + 5 colors<ul>
<li>Row 0: Colors 0-15 (transparent + 15 colors)</li>
<li>Row 1: Colors 16-20 (5 colors)</li>
</ul>
</li>
<li><b>ROM</b>: 0xDE86C</li>
<li><b>Sets</b>: 20</li>
</ul>
<h3><a class="anchor" id="autotoc_md1862"></a>
Overworld Animated (7 colors per set)</h3>
<ul>
<li><b>Structure</b>: Half-row without transparent<ul>
<li>Colors 0-6 (7 colors, no transparent marker as these overlay existing)</li>
</ul>
</li>
<li><b>ROM</b>: 0xDE604</li>
<li><b>Sets</b>: 14</li>
</ul>
<h3><a class="anchor" id="autotoc_md1863"></a>
Dungeon Main (90 colors per set)</h3>
<ul>
<li><b>Structure</b>: 5 full rows + 10 colors<ul>
<li>Row 0: Colors 0-15 (transparent + 15 colors)</li>
<li>Row 1: Colors 16-31 (transparent + 15 colors)</li>
<li>Row 2: Colors 32-47 (transparent + 15 colors)</li>
<li>Row 3: Colors 48-63 (transparent + 15 colors)</li>
<li>Row 4: Colors 64-79 (transparent + 15 colors)</li>
<li>Row 5: Colors 80-89 (10 colors)</li>
</ul>
</li>
<li><b>ROM</b>: 0xDD734</li>
<li><b>Sets</b>: 20 (one per dungeon)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1864"></a>
Sprite Palettes (OAM)</h2>
<p>Sprite palettes use rows 8-15 (colors 128-255).</p>
<h3><a class="anchor" id="autotoc_md1865"></a>
Global Sprites (60 colors total)</h3>
<ul>
<li><b>Structure</b>: 4 rows (each with 15 actual colors + transparent)<ul>
<li>Row 8: Colors 128-143 (Sprite Palette 0: transparent + 15 colors)</li>
<li>Row 9: Colors 144-159 (Sprite Palette 1: transparent + 15 colors)</li>
<li>Row 10: Colors 160-175 (Sprite Palette 2: transparent + 15 colors)</li>
<li>Row 11: Colors 176-191 (Sprite Palette 3: transparent + 15 colors)</li>
</ul>
</li>
<li><b>ROM LW</b>: 0xDD218</li>
<li><b>ROM DW</b>: 0xDD290</li>
<li><b>Total</b>: 2 sets (LW and DW)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1866"></a>
Sprites Auxiliary 1 (7 colors per palette)</h3>
<ul>
<li><b>Structure</b>: 12 palettes, each occupying half a row<ul>
<li>Palette 0: 7 colors (indices 1-7 of first half-row)</li>
<li>Palette 1: 7 colors (indices 9-15 of second half-row)</li>
<li>...and so on</li>
</ul>
</li>
<li><b>ROM</b>: 0xDD39E</li>
<li><b>Palettes</b>: 12</li>
</ul>
<h3><a class="anchor" id="autotoc_md1867"></a>
Sprites Auxiliary 2 (7 colors per palette)</h3>
<ul>
<li><b>Structure</b>: 11 palettes, each occupying half a row</li>
<li><b>ROM</b>: 0xDD446</li>
<li><b>Palettes</b>: 11</li>
</ul>
<h3><a class="anchor" id="autotoc_md1868"></a>
Sprites Auxiliary 3 (7 colors per palette)</h3>
<ul>
<li><b>Structure</b>: 24 palettes, each occupying half a row</li>
<li><b>ROM</b>: 0xDD4E0</li>
<li><b>Palettes</b>: 24</li>
</ul>
<h2><a class="anchor" id="autotoc_md1869"></a>
Equipment/Link Palettes</h2>
<h3><a class="anchor" id="autotoc_md1870"></a>
Armor/Link (15 colors per palette)</h3>
<ul>
<li><b>Structure</b>: Full row minus transparent<ul>
<li>Each palette: transparent + 15 colors</li>
</ul>
</li>
<li><b>ROM</b>: 0xDD308</li>
<li><b>Palettes</b>: 5 (Green Mail, Blue Mail, Red Mail, Bunny, Electrocuted)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1871"></a>
Swords (3 colors per palette)</h3>
<ul>
<li><b>Structure</b>: 3 colors within row (no transparent needed as overlay)</li>
<li><b>ROM</b>: 0xDD630</li>
<li><b>Palettes</b>: 4 (Fighter, Master, Tempered, Golden)</li>
</ul>
<h3><a class="anchor" id="autotoc_md1872"></a>
Shields (4 colors per palette)</h3>
<ul>
<li><b>Structure</b>: 4 colors within row (no transparent needed as overlay)</li>
<li><b>ROM</b>: 0xDD648</li>
<li><b>Palettes</b>: 3 (Fighter, Fire, Mirror)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1873"></a>
HUD Palettes</h2>
<h3><a class="anchor" id="autotoc_md1874"></a>
HUD (32 colors per set)</h3>
<ul>
<li><b>Structure</b>: 2 full rows<ul>
<li>Row 0: Colors 0-15 (transparent + 15 colors)</li>
<li>Row 1: Colors 16-31 (transparent + 15 colors)</li>
</ul>
</li>
<li><b>ROM</b>: 0xDD660</li>
<li><b>Sets</b>: 2</li>
</ul>
<h2><a class="anchor" id="autotoc_md1875"></a>
Special Colors</h2>
<h3><a class="anchor" id="autotoc_md1876"></a>
Grass (3 individual colors)</h3>
<ul>
<li>LW: 0x5FEA9</li>
<li>DW: 0x5FEB3</li>
<li>Special: 0x75640</li>
</ul>
<h3><a class="anchor" id="autotoc_md1877"></a>
3D Objects (8 colors per palette)</h3>
<ul>
<li><b>Triforce</b>: 0x64425</li>
<li><b>Crystal</b>: 0xF4CD3</li>
</ul>
<h3><a class="anchor" id="autotoc_md1878"></a>
Overworld Mini Map (128 colors per set)</h3>
<ul>
<li><b>Structure</b>: 8 full rows</li>
<li><b>ROM</b>: 0x55B27</li>
<li><b>Sets</b>: 2</li>
</ul>
<h1><a class="anchor" id="autotoc_md1879"></a>
Key Principles</h1>
<ol type="1">
<li><b>Transparent Color</b>: Always at indices 0, 16, 32, 48, 64, etc. (multiples of 16)</li>
<li><b>Row Alignment</b>: Palettes should respect 16-color row boundaries</li>
<li><b>Overlay Palettes</b>: Some palettes (like animated, swords, shields) overlay existing colors and don't have their own transparent</li>
<li><b>Sub-Palettes</b>: Multiple small palettes can share a row if they're 8 colors or less</li>
</ol>
<h1><a class="anchor" id="autotoc_md1880"></a>
Implementation Notes</h1>
<p>When loading palettes, we must:</p><ol type="1">
<li>Mark color index 0 of each 16-color row as transparent</li>
<li>For palettes &lt; 16 colors, understand if they're standalone (need transparent) or overlays (don't need transparent)</li>
<li>Display palettes in UI with proper row alignment for clarity </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

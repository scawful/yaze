<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yaze: z3ed: AI-Powered CLI for YAZE</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../yaze.ico"/></td>
  <td id="projectalign">
   <div id="projectname">yaze<span id="projectnumber">&#160;0.3.1</span>
   </div>
   <div id="projectbrief">Link to the Past ROM Editor</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d3/d63/md_docs_2z3ed_2README.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">z3ed: AI-Powered CLI for YAZE</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1840"></a> <b>Status</b>: Active Development <br  />
 <b>Version</b>: 0.1.0-alpha <br  />
 <b>Last Updated</b>: October 2, 2025 (IT-01 Complete, E2E Validation Phase)</p>
<h1><a class="anchor" id="autotoc_md1841"></a>
Overview</h1>
<p><code>z3ed</code> is a command-line interface for YAZE (Yet Another Zelda3 Editor) that enables AI-driven ROM modifications through a proposal-based workflow. It allows AI agents to suggest changes, which are then reviewed and accepted/rejected by human operators via the YAZE GUI.</p>
<h1><a class="anchor" id="autotoc_md1842"></a>
Documentation Index</h1>
<h2><a class="anchor" id="autotoc_md1843"></a>
🎯 Essential Documents (Start Here)</h2>
<ol type="1">
<li><b><a class="el" href="../../de/dd3/md_docs_2z3ed_2NEXT__PRIORITIES__OCT2.html">Next Priorities</a></b> - 🚀 <b>CURRENT WORK</b> - Detailed Priority 1-3 tasks with implementation guides</li>
<li><b><a class="el" href="../../df/da9/md_docs_2z3ed_2E6-z3ed-implementation-plan.html">Implementation Plan</a></b> - ⭐ <b>MASTER TRACKER</b> - Complete task backlog, progress, architecture</li>
<li><b><a class="el" href="../../d5/dc5/md_docs_2z3ed_2E6-z3ed-cli-design.html">CLI Design</a></b> - 📐 <b>DESIGN DOC</b> - High-level vision, command structure, workflows</li>
<li><b><a class="el" href="../../d3/dd9/md_docs_2z3ed_2IT-01-QUICKSTART.html">IT-01 Quickstart</a></b> - ⚡ <b>QUICK REFERENCE</b> - Test harness commands and examples</li>
</ol>
<h2><a class="anchor" id="autotoc_md1844"></a>
� Archive</h2>
<p>Historical documentation (design decisions, phase completions, technical notes) moved to <code>archive/</code> folder for reference.</p>
<h1><a class="anchor" id="autotoc_md1845"></a>
Architecture</h1>
<div class="fragment"><div class="line">┌─────────────────────────────────────────────────────────┐</div>
<div class="line">│ z3ed CLI                                                │</div>
<div class="line">│  └─ agent subcommand                                    │</div>
<div class="line">│     ├─ run &lt;prompt&gt; [--sandbox]                         │</div>
<div class="line">│     ├─ list                                             │</div>
<div class="line">│     └─ test &lt;prompt&gt;                                    │</div>
<div class="line">└────────────────────┬────────────────────────────────────┘</div>
<div class="line">                     │</div>
<div class="line">┌────────────────────▼────────────────────────────────────┐</div>
<div class="line">│ Services Layer (Singleton Services)                     │</div>
<div class="line">│  ├─ ProposalRegistry                                    │</div>
<div class="line">│  │   ├─ CreateProposal()                                │</div>
<div class="line">│  │   ├─ ListProposals()                                 │</div>
<div class="line">│  │   └─ LoadProposalsFromDiskLocked()                   │</div>
<div class="line">│  ├─ RomSandboxManager                                   │</div>
<div class="line">│  │   ├─ CreateSandbox()                                 │</div>
<div class="line">│  │   └─ FindSandbox()                                   │</div>
<div class="line">│  └─ PolicyEvaluator (Planned)                           │</div>
<div class="line">│      ├─ LoadPolicies()                                  │</div>
<div class="line">│      └─ EvaluateProposal()                              │</div>
<div class="line">└────────────────────┬────────────────────────────────────┘</div>
<div class="line">                     │</div>
<div class="line">┌────────────────────▼────────────────────────────────────┐</div>
<div class="line">│ Filesystem Layer                                        │</div>
<div class="line">│  ├─ /tmp/yaze/proposals/&lt;id&gt;/                          │</div>
<div class="line">│  │   ├─ metadata.json                                   │</div>
<div class="line">│  │   ├─ execution.log                                   │</div>
<div class="line">│  │   └─ diff.txt                                        │</div>
<div class="line">│  └─ /tmp/yaze/sandboxes/&lt;id&gt;/                          │</div>
<div class="line">│      └─ zelda3.sfc (copy)                               │</div>
<div class="line">└────────────────────┬────────────────────────────────────┘</div>
<div class="line">                     │</div>
<div class="line">┌────────────────────▼────────────────────────────────────┐</div>
<div class="line">│ YAZE GUI                                                │</div>
<div class="line">│  └─ ProposalDrawer (400px right panel)                  │</div>
<div class="line">│     ├─ List View (proposals from registry)              │</div>
<div class="line">│     ├─ Detail View (metadata, diff, log)                │</div>
<div class="line">│     └─ AcceptProposal() → ROM merging                   │</div>
<div class="line">└─────────────────────────────────────────────────────────┘</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1846"></a>
Current Status</h1>
<h2><a class="anchor" id="autotoc_md1847"></a>
✅ Phase 6: Resource Catalogue (COMPLETE)</h2>
<ul>
<li><b>Resource Catalog System</b>: Comprehensive schema for all CLI commands</li>
<li><b>Agent Describe</b>: Machine-readable API catalog export (JSON/YAML)</li>
<li><b>API Documentation</b>: <code>docs/api/z3ed-resources.yaml</code> for AI/LLM consumption</li>
</ul>
<h2><a class="anchor" id="autotoc_md1848"></a>
✅ AW-01 &amp; AW-02: Proposal Infrastructure (COMPLETE)</h2>
<ul>
<li><b>ProposalRegistry</b>: Disk persistence with lazy loading</li>
<li><b>RomSandboxManager</b>: Isolated ROM copies for safe testing</li>
<li><b>Cross-Session Tracking</b>: Proposals persist between CLI runs</li>
</ul>
<h2><a class="anchor" id="autotoc_md1849"></a>
✅ AW-03: ProposalDrawer GUI (COMPLETE)</h2>
<ul>
<li><b>ProposalDrawer GUI</b>: Split view, proposal list, detail panel</li>
<li><b>ROM Merging</b>: Sandbox-to-main ROM data copy on acceptance</li>
<li><b>Full Lifecycle</b>: Create (CLI) → Review (GUI) → Accept/Reject → Commit</li>
</ul>
<h2><a class="anchor" id="autotoc_md1850"></a>
✅ IT-01: ImGuiTestHarness (COMPLETE) 🎉</h2>
<p><b>All 3 Phases Complete</b>: gRPC + TestManager + ImGuiTestEngine <br  />
 <b>Time Invested</b>: 11 hours total (Phase 1: 4h, Phase 2: 4h, Phase 3: 3h)</p>
<ul>
<li><b>Phase 1</b> ✅: gRPC infrastructure with 6 RPC methods</li>
<li><b>Phase 2</b> ✅: TestManager integration with dynamic test registration</li>
<li><b>Phase 3</b> ✅: Full ImGuiTestEngine integration (Type/Wait/Assert RPCs)</li>
<li><b>Testing</b> ✅: E2E test script operational (<code>scripts/test_harness_e2e.sh</code>)</li>
<li><b>Documentation</b> ✅: Complete guides (QUICKSTART, PHASE3-COMPLETE)</li>
</ul>
<p><b>See</b>: <a class="el" href="../../d3/dd9/md_docs_2z3ed_2IT-01-QUICKSTART.html">IT-01-QUICKSTART.md</a> for usage examples</p>
<h2><a class="anchor" id="autotoc_md1851"></a>
✅ IT-02: CLI Agent Test Command (COMPLETE) 🎉</h2>
<p><b>Implementation Complete</b>: Natural language → automated GUI testing <br  />
 <b>Time Invested</b>: 4 hours (design + implementation + documentation) <br  />
 <b>Status</b>: Ready for validation</p>
<p><b>Components</b>:</p><ul>
<li><b>GuiAutomationClient</b>: gRPC wrapper for CLI usage (6 RPC methods)</li>
<li><b>TestWorkflowGenerator</b>: Natural language prompt parser (4 pattern types)</li>
<li>**<code>z3ed agent test</code>**: End-to-end automation command</li>
</ul>
<p><b>Supported Prompts</b>:</p><ol type="1">
<li>"Open Overworld editor" → Click + Wait</li>
<li>"Open Dungeon editor and verify it loads" → Click + Wait + Assert</li>
<li>"Type 'zelda3.sfc' in filename input" → Click + Type</li>
<li>"Click Open ROM button" → Single click</li>
</ol>
<p><b>Example Usage</b>: </p><div class="fragment"><div class="line"># Start YAZE with test harness</div>
<div class="line">./build-grpc-test/bin/yaze.app/Contents/MacOS/yaze \</div>
<div class="line">  --enable_test_harness \</div>
<div class="line">  --test_harness_port=50052 \</div>
<div class="line">  --rom_file=assets/zelda3.sfc &amp;</div>
<div class="line"> </div>
<div class="line"># Run automated test</div>
<div class="line">./build-grpc-test/bin/z3ed agent test \</div>
<div class="line">  --prompt &quot;Open Overworld editor&quot;</div>
<div class="line"> </div>
<div class="line"># Output:</div>
<div class="line"># === GUI Automation Test ===</div>
<div class="line"># Prompt: Open Overworld editor</div>
<div class="line"># ...</div>
<div class="line"># [1/2] Click(button:Overworld) ... ✓ (125ms)</div>
<div class="line"># [2/2] Wait(window_visible:Overworld Editor, 5000ms) ... ✓ (1250ms)</div>
<div class="line"># ✅ Test passed in 1375ms</div>
</div><!-- fragment --><p><b>See</b>: <a class="el" href="../../de/dd1/md_docs_2z3ed_2IMPLEMENTATION__PROGRESS__OCT2.html">IMPLEMENTATION_PROGRESS_OCT2.md</a> for complete details</p>
<h2><a class="anchor" id="autotoc_md1852"></a>
📋 Priority 1: End-to-End Workflow Validation (NEXT)</h2>
<p><b>Goal</b>: Test complete proposal lifecycle with real GUI and widgets <br  />
 <b>Time Estimate</b>: 2-3 hours <br  />
 <b>Status</b>: Ready to execute - all prerequisites complete</p>
<p><b>Tasks</b>:</p><ol type="1">
<li>Run E2E test script and validate all RPCs</li>
<li>Test proposal workflow: Create → Review → Accept/Reject</li>
<li>Test GUI automation with real YAZE widgets</li>
<li>Validate CLI agent test command with multiple prompts</li>
<li>Document edge cases and troubleshooting</li>
</ol>
<p><b>See</b>: <a class="el" href="../../d2/d1e/md_docs_2z3ed_2E2E__VALIDATION__GUIDE.html">E2E_VALIDATION_GUIDE.md</a> for detailed checklist</p>
<h2><a class="anchor" id="autotoc_md1853"></a>
📋 Priority 3: Policy Evaluation Framework (AW-04)</h2>
<p><b>Goal</b>: YAML-based constraint system for gating proposal acceptance <br  />
 <b>Time Estimate</b>: 6-8 hours <br  />
 <b>Blocking</b>: None (can work in parallel)</p>
<h1><a class="anchor" id="autotoc_md1854"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md1855"></a>
Build and Test</h2>
<div class="fragment"><div class="line"># Build z3ed CLI</div>
<div class="line">cmake --build build --target z3ed -j8</div>
<div class="line"> </div>
<div class="line"># Build YAZE with test harness</div>
<div class="line">cmake -B build-grpc-test -DYAZE_WITH_GRPC=ON</div>
<div class="line">cmake --build build-grpc-test --target yaze -j$(sysctl -n hw.ncpu)</div>
<div class="line"> </div>
<div class="line"># Run E2E tests</div>
<div class="line">./scripts/test_harness_e2e.sh</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1856"></a>
Create and Review Proposal</h2>
<div class="fragment"><div class="line"># 1. Create proposal</div>
<div class="line">./build/bin/z3ed agent run &quot;Test proposal&quot; --sandbox</div>
<div class="line"> </div>
<div class="line"># 2. List proposals</div>
<div class="line">./build/bin/z3ed agent list</div>
<div class="line"> </div>
<div class="line"># 3. Review in GUI</div>
<div class="line">./build/bin/yaze.app/Contents/MacOS/yaze</div>
<div class="line"># Open: Debug → Agent Proposals</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1857"></a>
Test Harness Usage</h2>
<div class="fragment"><div class="line"># Start YAZE with test harness</div>
<div class="line">./build-grpc-test/bin/yaze.app/Contents/MacOS/yaze \</div>
<div class="line">  --enable_test_harness \</div>
<div class="line">  --test_harness_port=50052 \</div>
<div class="line">  --rom_file=assets/zelda3.sfc &amp;</div>
<div class="line"> </div>
<div class="line"># Test individual RPCs (see IT-01-QUICKSTART.md for full reference)</div>
<div class="line">grpcurl -plaintext -import-path src/app/core/proto -proto imgui_test_harness.proto \</div>
<div class="line">  -d &#39;{&quot;message&quot;:&quot;test&quot;}&#39; 127.0.0.1:50052 yaze.test.ImGuiTestHarness/Ping</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1858"></a>
Key Files &amp; Components</h1>
<p><b>Core Services</b>:</p><ul>
<li><code>src/cli/service/proposal_registry.{h,cc}</code> - Proposal tracking and persistence</li>
<li><code>src/cli/service/rom_sandbox_manager.{h,cc}</code> - Isolated ROM copies</li>
<li><code>src/cli/service/resource_catalog.{h,cc}</code> - Machine-readable API specs</li>
</ul>
<p><b>GUI Integration</b>:</p><ul>
<li><code>src/app/editor/system/proposal_drawer.{h,cc}</code> - Proposal review panel</li>
<li><code>src/app/core/imgui_test_harness_service.{h,cc}</code> - gRPC test automation server</li>
</ul>
<p><b>CLI Handlers</b>:</p><ul>
<li><code><a class="el" href="../../d2/d0e/agent_8cc.html">src/cli/handlers/agent.cc</a></code> - Agent subcommand (run, list, diff, describe)</li>
<li><code><a class="el" href="../../d4/d1a/cli_2handlers_2rom_8cc.html">src/cli/handlers/rom.cc</a></code> - ROM commands (info, validate, diff)</li>
</ul>
<p><b>Configuration</b>:</p><ul>
<li><code>docs/api/z3ed-resources.yaml</code> - Generated API catalog for AI/LLM</li>
<li><code>.yaze/policies/agent.yaml</code> - (Planned) Policy rules</li>
</ul>
<h1><a class="anchor" id="autotoc_md1859"></a>
Development Guidelines</h1>
<p>See <code><a class="el" href="../../dc/dd0/B1-contributing_8md.html">docs/B1-contributing.md</a></code> for general guidelines.</p>
<p><b>z3ed-Specific</b>:</p><ul>
<li>Use singleton pattern for services (<code>Instance()</code> accessor)</li>
<li>Return <code>absl::Status</code> or <code>absl::StatusOr&lt;T&gt;</code> for error handling</li>
<li>Update <code><a class="el" href="../../d9/df3/NEXT__PRIORITIES__OCT2_8md.html">NEXT_PRIORITIES_OCT2.md</a></code> when starting new work</li>
<li>Update <code><a class="el" href="../../df/d90/E6-z3ed-implementation-plan_8md.html">E6-z3ed-implementation-plan.md</a></code> task backlog when completing tasks</li>
</ul>
<hr  />
<p><b>Questions?</b> Open an issue or see implementation plan for detailed architecture. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
